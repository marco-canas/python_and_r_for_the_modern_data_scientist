YUI.add("handlebars-intl",(function(e,t){!(function(e,t){"use strict";var r=e.Intl||e.IntlPolyfill;"function"==typeof define&&define.amd&&define(["intl-messageformat"],(function(e){return t(r,e)})),"object"==typeof exports&&(module.exports=t(r,require("intl-messageformat"))),e.HandlebarsHelperIntl=t(r,e.IntlMessageFormat)})("undefined"!=typeof global?global:this,(function(e,t){"use strict";if(!e)throw new ReferenceError("Intl must be available.");if(!t)throw new ReferenceError("IntlMessageFormat must be available.");var r={registerWith:function(e){var r,n=e.SafeString,o=e.createFrame,l=e.Utils.escapeExpression,f={intl:function(e){if(!e.fn)throw new ReferenceError("{{#intl}} must be invoked as a block helper");var t=o(e.data),r=i({},t.intl,e.hash);return t.intl=r,e.fn(this,{data:t})},intlDate:function(e,t,r){if(!((e=new Date(e))&&e.getTime()))return"";r||(r=t,t=null);var n=r.hash,o=r.data,l=o.intl&&o.intl.locales;t?("string"==typeof t&&(t=s("formats.date."+t,r)),t=i({},t,n)):t=n;return a("date",l,t).format(e)},intlNumber:function(e,t,r){if("number"!=typeof e)return"";r||(r=t,t=null);var n=r.hash,o=r.data,l=o.intl&&o.intl.locales;t?("string"==typeof t&&(t=s("formats.number."+t,r)),t=i({},t,n)):t=n;return a("number",l,t).format(e)},intlGet:s,intlMessage:u,intlHTMLMessage:function(){var e,t,r=[].slice.call(arguments).pop(),a=r.hash;for(e in a)a.hasOwnProperty(e)&&"string"==typeof(t=a[e])&&(a[e]=l(t));return new n(String(u.apply(this,arguments)))}};for(r in f)f.hasOwnProperty(r)&&e.registerHelper(r,f[r]);function s(e,t){var r,n,a,i=t.data&&t.data.intl,o=e.split(".");try{for(a=0,n=o.length;a<n;a++)r=i=i[o[a]]}finally{if(void 0===r)throw new ReferenceError("Could not find Intl object: "+e)}return r}function u(e,r){r||(r=e,e=null);var n=r.hash;if(!e&&"string"!=typeof e&&!n.intlName)throw new ReferenceError("{{intlMessage}} must be provided a message or intlName");var a=r.data.intl||{},i=a.locales,o=a.formats;return!e&&n.intlName&&(e=s(n.intlName,r)),"function"==typeof e?e(n):("function"!=typeof e.format&&(e=new t(e,i,o,{ignoreTag:!0})),e.format(n))}}},n={number:{},date:{}};function a(t,r,a){var i,o,l,f,s,u,c;if(JSON){if(a){for(l in i=[],a)a.hasOwnProperty(l)&&i.push(l);for(i.sort(),f=0,s=i.length;f<s;f+=1)(o={})[l=i[f]]=a[l],i[f]=o}u=JSON.stringify([r,i])}if(c=n[t][u])return c;switch(t){case"number":c=new e.NumberFormat(r,a);break;case"date":c=new e.DateTimeFormat(r,a)}return u&&(n[t][u]=c),c}function i(e){var t,r,n,a,i=Array.prototype.slice.call(arguments,1);for(t=0,r=i.length;t<r;t+=1)if(n=i[t])for(a in n)n.hasOwnProperty(a)&&(e[a]=n[a]);return e}return r}))}),"@VERSION@",{es:!0,requires:["intl-messageformat"]});YUI.add("god-message",(function(i){"use strict";i.godMessage=function(n){var o,r,g,c,e,f="GOD_MESSAGE_MISSING";if(void 0===n.intlName)return f;if(r=n.intlName.split("."),!(i.config.flickr&&i.config.flickr.god&&i.config.flickr.god.lang&&i.config.flickr.god.lang))return f;o=i.clone(i.config.flickr.god.lang);try{for(e=0,c=r.length;e<c;e++)g=o=o[r[e]]}catch(i){return f}return void 0===g?f:g}}),"@VERSION@",{requires:["oop"]});YUI.add("cldr-numbers",(function(o,t){o[t]={data:{"en-US":{"1000-count-one":"0K","1000-count-other":"0K","10000-count-one":"00K","10000-count-other":"00K","100000-count-one":"000K","100000-count-other":"000K","1000000-count-one":"0M","1000000-count-other":"0M","10000000-count-one":"00M","10000000-count-other":"00M","100000000-count-one":"000M","100000000-count-other":"000M","1000000000-count-one":"0B","1000000000-count-other":"0B","10000000000-count-one":"00B","10000000000-count-other":"00B","100000000000-count-one":"000B","100000000000-count-other":"000B","1000000000000-count-one":"0T","1000000000000-count-other":"0T","10000000000000-count-one":"00T","10000000000000-count-other":"00T","100000000000000-count-one":"000T","100000000000000-count-other":"000T"},"zh-HK":{"1000-count-other":"0K","10000-count-other":"00K","100000-count-other":"000K","1000000-count-other":"0M","10000000-count-other":"00M","100000000-count-other":"000M","1000000000-count-other":"0B","10000000000-count-other":"00B","100000000000-count-other":"000B","1000000000000-count-other":"0T","10000000000000-count-other":"00T","100000000000000-count-other":"000T"},"de-DE":{"1000-count-one":"0","1000-count-other":"0","10000-count-one":"0","10000-count-other":"0","100000-count-one":"0","100000-count-other":"0","1000000-count-one":"0 Mio'.'","1000000-count-other":"0 Mio'.'","10000000-count-one":"00 Mio'.'","10000000-count-other":"00 Mio'.'","100000000-count-one":"000 Mio'.'","100000000-count-other":"000 Mio'.'","1000000000-count-one":"0 Mrd'.'","1000000000-count-other":"0 Mrd'.'","10000000000-count-one":"00 Mrd'.'","10000000000-count-other":"00 Mrd'.'","100000000000-count-one":"000 Mrd'.'","100000000000-count-other":"000 Mrd'.'","1000000000000-count-one":"0 Bio'.'","1000000000000-count-other":"0 Bio'.'","10000000000000-count-one":"00 Bio'.'","10000000000000-count-other":"00 Bio'.'","100000000000000-count-one":"000 Bio'.'","100000000000000-count-other":"000 Bio'.'"},"es-US":{"1000-count-one":"0","1000-count-other":"0","10000-count-one":"00k","10000-count-other":"00k","100000-count-one":"000k","100000-count-other":"000k","1000000-count-one":"0 M","1000000-count-other":"0 M","10000000-count-one":"00 M","10000000-count-other":"00 M","100000000-count-one":"000 M","100000000-count-other":"000 M","1000000000-count-one":"0k M","1000000000-count-other":"0k M","10000000000-count-one":"00k M","10000000000-count-other":"00k M","100000000000-count-one":"000k M","100000000000-count-other":"000k M","1000000000000-count-one":"0 B","1000000000000-count-other":"0 B","10000000000000-count-one":"00 B","10000000000000-count-other":"00 B","100000000000000-count-one":"000 B","100000000000000-count-other":"000 B"},"fr-FR":{"1000-count-one":"0 k","1000-count-other":"0 k","10000-count-one":"00 k","10000-count-other":"00 k","100000-count-one":"000 k","100000-count-other":"000 k","1000000-count-one":"0 M","1000000-count-other":"0 M","10000000-count-one":"00 M","10000000-count-other":"00 M","100000000-count-one":"000 M","100000000-count-other":"000 M","1000000000-count-one":"0 Md","1000000000-count-other":"0 Md","10000000000-count-one":"00 Md","10000000000-count-other":"00 Md","100000000000-count-one":"000 Md","100000000000-count-other":"000 Md","1000000000000-count-one":"0 Bn","1000000000000-count-other":"0 Bn","10000000000000-count-one":"00 Bn","10000000000000-count-other":"00 Bn","100000000000000-count-one":"000 Bn","100000000000000-count-other":"000 Bn"},"ko-KR":{"1000-count-other":"0천","10000-count-other":"0만","100000-count-other":"00만","1000000-count-other":"000만","10000000-count-other":"0000만","100000000-count-other":"0억","1000000000-count-other":"00억","10000000000-count-other":"000억","100000000000-count-other":"0000억","1000000000000-count-other":"0조","10000000000000-count-other":"00조","100000000000000-count-other":"000조"},"it-IT":{"1000-count-one":"0","1000-count-other":"0","10000-count-one":"0","10000-count-other":"0","100000-count-one":"0","100000-count-other":"0","1000000-count-one":"0 Mln","1000000-count-other":"0 Mln","10000000-count-one":"00 Mln","10000000-count-other":"00 Mln","100000000-count-one":"000 Mln","100000000-count-other":"000 Mln","1000000000-count-one":"0 Mld","1000000000-count-other":"0 Mld","10000000000-count-one":"00 Mld","10000000000-count-other":"00 Mld","100000000000-count-one":"000 Mld","100000000000-count-other":"000 Mld","1000000000000-count-one":"0 Bln","1000000000000-count-other":"0 Bln","10000000000000-count-one":"00 Bln","10000000000000-count-other":"00 Bln","100000000000000-count-one":"000 Bln","100000000000000-count-other":"000 Bln"},"pt-BR":{"1000-count-one":"0 mil","1000-count-other":"0 mil","10000-count-one":"00 mil","10000-count-other":"00 mil","100000-count-one":"000 mil","100000-count-other":"000 mil","1000000-count-one":"0 mi","1000000-count-other":"0 mi","10000000-count-one":"00 mi","10000000-count-other":"00 mi","100000000-count-one":"000 mi","100000000-count-other":"000 mi","1000000000-count-one":"0 bi","1000000000-count-other":"0 bi","10000000000-count-one":"00 bi","10000000000-count-other":"00 bi","100000000000-count-one":"000 bi","100000000000-count-other":"000 bi","1000000000000-count-one":"0 tri","1000000000000-count-other":"0 tri","10000000000000-count-one":"00 tri","10000000000000-count-other":"00 tri","100000000000000-count-one":"000 tri","100000000000000-count-other":"000 tri"},"vi-VN":{"1000-count-other":"0 N","10000-count-other":"00 N","100000-count-other":"000 N","1000000-count-other":"0 Tr","10000000-count-other":"00 Tr","100000000-count-other":"000 Tr","1000000000-count-other":"0 T","10000000000-count-other":"00 T","100000000000-count-other":"000 T","1000000000000-count-other":"0 NT","10000000000000-count-other":"00 NT","100000000000000-count-other":"000 NT"},"id-ID":{"1000-count-other":"0 rb","10000-count-other":"00 rb","100000-count-other":"000 rb","1000000-count-other":"0 jt","10000000-count-other":"00 jt","100000000-count-other":"000 jt","1000000000-count-other":"0 M","10000000000-count-other":"00 M","100000000000-count-other":"000 M","1000000000000-count-other":"0 T","10000000000000-count-other":"00 T","100000000000000-count-other":"000 T"}}}}),"@VERSION@");YUI.add("intl-number",(function(e,t){var o=require("hermes-core/flog")(t),n=e["cldr-numbers"];e.IntlNumber={format:function(e,t,o){var r,c,i,u,a,s,l,f,m,h="en-US",g=n.data["en-US"],p=n.data[t],y="",d="",S="";if(e<1e3)return e.toLocaleString(t,{maximumFractionDigits:o});if(e<2e3)y="1000-count-one",d="1000-count-other";else if(e<1e4)y="1000-count-other",d="1000-count-one";else if(e<2e4)y="10000-count-one",d="10000-count-other";else if(e<1e5)y="10000-count-other",d="10000-count-one";else if(e<2e5)y="100000-count-one",d="100000-count-other";else if(e<1e6)y="100000-count-other",d="100000-count-one";else if(e<2e6)y="1000000-count-one",d="1000000-count-other";else if(e<1e7)y="1000000-count-other",d="1000000-count-one";else if(e<2e7)y="10000000-count-one",d="10000000-count-other";else if(e<1e8)y="10000000-count-other",d="10000000-count-one";else if(e<2e8)y="100000000-count-one",d="100000000-count-other";else if(e<1e9)y="100000000-count-other",d="100000000-count-one";else if(e<2e9)y="1000000000-count-one",d="1000000000-count-other";else{if(!(e<1e10))return e.toLocaleString(t,{maximumFractionDigits:o});y="1000000000-count-other",d="1000000000-count-one"}return(r=p[y]||p[d])||(t=h,r=g[y]),r&&"0"!==r?(i=(r=r.replace(/'/g,"")).split(""),u=[],a=e.toString().split(""),s=0,l=0,i.forEach((function(e,t){"0"===e&&l++})),a.forEach((function(e,t){t<l&&u.push(a[s++])})),o&&(u.push("."),a.forEach((function(e,t){var o=a[s];t>=s&&(void 0!==o&&"."!==o&&u.push(o),s++)}))),i.forEach((function(e,t){t>=l&&(S+=e)})),c=parseFloat(u.join("")),parseInt(c.toFixed(o)).toString().length>l?(m=Math.pow(10,Math.ceil(Math.log10(e))),this.format(m,t,o)):(f=c.toLocaleString(t,{maximumFractionDigits:o}),S?f+S:f)):e.toLocaleString(t,{maximumFractionDigits:o})},formatCurrency:function(t,n,r,c){var i={style:"currency",currency:"USD"};return n&&(i.currency=n),e.Object.isEmpty(c)||(c.hasOwnProperty("maximumFractionDigits")&&(i.minimumFractionDigits=0),c.hasOwnProperty("currency")&&o.error("Error: you cannot declare currency as an option")),i=Object.assign({},i,c),r.indexOf("_")>-1&&(r=r.replace("_","-")),new Intl.NumberFormat(r,i).format(t)}}}),"@VERSION@",{requires:["cldr-numbers"]});YUI.add("string-helper",(function(r){r.StringHelper={preventOrphans:function(r,t){var e=(r="string"==typeof r?r:"").split(" ").length;return t&&e<t?r:r.replace(/\s+(\S*)$/," $1")},preventOrphansHtml:function(r){return r=(r=(r="string"==typeof r?r:"").trim()).replace(/\s+((\S|<[^>]+>)*)$/g,"&nbsp;$1")},escapeHtml:function(r){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return r.replace(/[&<>"']/g,(function(r){return t[r]}))},stripTags:function(r){return r?String(r).replace(/<\/?[^>]+>/g,""):""}}}),"@VERSION@",{requires:[]});YUI.add("handlebars-helpers",(function(e){"use strict";var t,n,r,i=e.Handlebars,s={outlet:function(e,t){var n,r;return t=void 0===t||t,e?e.render?(r=e,n=YUI.Env.isServer?r.get("container").get("outerHTML"):'<div id="'+r.getId()+'" class="hb-placeholder"></div>'):n=YUI.Env.isServer&&t?e.get("outerHTML"):t?'<div id="'+e._yuid+'"></div>':e:n="",new i.SafeString(n)},photoDescription:function(e,t,n){var r;return t?new i.SafeString(e.split("\n").map((function(e){return""===e.trim()?"&nbsp;":"<p>"+(n?e:s.addLinkToHash(e))+"</p>"})).join("").split("<br>").map((function(e){return""===e.trim()?"&nbsp;":n?e:s.addLinkToHash(e)})).join("")):new i.SafeString(e.split("\n").map((function(e){return r="<p>",""===e.trim()?r+="&nbsp;":r+=n?e:s.addLinkToHash(e),r+"</p>"})).join(""))},photoAttribution:function(e,t,n){var r,i="";return e.owner&&e.owner.displayname&&(i=e.owner.displayname),t&&t["remove-by-attribution"]||(e.isOwner?(r="common.BY_YOU",i=""):r="common.BY_USER"),n.fn({user:i,intlName:r})},commentPermalinkId:function(e){return"comment"+e.split("-")[2]},contactUrl:function(e){return"/photos/"+e.pathAlias||e.id},renderTrustedMarkupWithLineBreaks:function(t){return t=t.replace(/(\r\n|\n|\r)/gm,"<br>"),e.Handlebars.helpers.renderTrustedMarkup(t)},renderSafeInlineComment:function(t,n){var r=r||120,i="";return((t=t.replace(/(\r\n|\n|\r)/gm," "))?t.length:0)?(n&&(n=" "+n),e.Handlebars.helpers.stripTags(t).length<=r?i=t:(i=e.Handlebars.helpers.stripTags(t)).length>r&&(i=e.Handlebars.helpers.truncate(i,r.toString(),!1,n)),e.Handlebars.helpers.renderTrustedMarkupWithLineBreaks(i)):i},stripTags:function(e){var t="";return e&&(t=String(e).replace(/<\/?[^>]+>/g,"")),t},photoNote:function(e){return e=e.replace(/(\r\n|\n|\r)/gm,"<p>&nbsp;</p>"),new i.SafeString(e)},canRemoveTag:function(t,n,r,i){return e.Handlebars.helpers.canRemoveAnyTag(t,n,r,null,i)},canRemoveAnyTag:function(e,t,n,r,i){return n||t&&e===t||r&&r===t?i.fn(this):""},formatNumber:function(t,n){var r=n.hash.decimals||1;try{t="number"!=typeof t?parseInt(t,10):t}catch(e){}return e.IntlNumber.format(t,n.data.intl.locales,r)},formatCurrency:function(t,n,r,i){try{return e.IntlNumber.formatCurrency(t,n,r,i.hash)}catch(e){return console.error(e),"-"}},obfuscateInternals:function(e){return e=e.toString(),parseInt(e.split("").map((function(e){return e.charCodeAt(0)})).join(""),10).toString(16)},renderMetaInfo:function(e){return e||"boolean"==typeof e?e.indexOf&&e.indexOf("<")>-1?e:new i.SafeString(e):""},addLinkToHash:function(e){return(e=(e=(e=e.replace(/<[\s]*[\/]*[\s]*script[\s]*>/gi,"")).replace(/<[\s]*[\/]*[\s]*iframe[\s]*>/gi,"")).replace(/<[^>]*(on[a-zA-Z]+=)[^>]*>/gi,"")).replace(/\s#[^#\s]+/gi,(function(t,n,r){return n>0&&"&"===e.slice(n-1,n)?t:' <a href="/photos/tags/'+escape(t.slice(2))+'">#'+t.slice(2).replace(/"/g,"")+"</a>"}))},isFlipped:function(e,t){var n=t.data.flippers||this.flippers;if(e)return n[e]?t.fn(this):t.inverse(this)},isNotFlipped:function(e,t){var n=t.data.flippers||this.flippers;if(e)return n[e]?t.inverse(this):t.fn(this)},urlPhoto:function(t,n){return e.URLHelper.getPhotoPage({photoId:t.id,pathAlias:t.owner.pathAlias,contextSuffix:n})},getTagSearchUrl:function(e){return"/search/?tags="+e},shortUrlPhoto:function(t,n){return t?e.URLHelper.getShortURL(t.id,n):window.location.href},friendlyDateScrappySubphoto:function(t,n,r,i){var s,a="";return a=r?8===n?"photo-page-scrappy.TAKEN_CIRCA":6===n?"photo-page-scrappy.TAKEN_SOMETIME_IN":4===n?"photo-page-scrappy.TAKEN_IN_MONTH":"photo-page-scrappy.TAKEN_ON_INTL":"photo-page-scrappy.UPLOADED_ON_INTL",s=r&&8===n?"granularity"in t&&"year"in t?t.year:t.replace(/^([\d]+)(.*)/g,"$1"):(t instanceof Date||("granularity"in t&&"year"in t?(t=e.moment(t.year+"-"+t.month+"-"+t.day+" "+t.hour+":"+t.minute+":"+t.second,"YYYY-M-D HH:mm:ss")).tzOffset&&t.utcOffset(t.tzOffset):t="string"==typeof t&&t.indexOf("-")>-1?e.moment(t):e.moment(t,"X")),6===n&&r?t.format("YYYY"):t.toDate()),i.fn({intlName:a,intlDate:s})},friendlyDate:function(t,n){return 8===n?"Circa "+t.replace(/^([\d]+)(.*)/g,"$1"):(t instanceof Date||(t="string"==typeof t&&t.indexOf("-")>-1?e.moment(t):e.moment(t,"X")),6===n?"Sometime in "+t.format("YYYY"):4===n?t.format("MMMM")+" "+t.format("YYYY"):t.format("MMMM D, YYYY"))},friendlyDataSize:function(e){var t,n,r,i=parseInt(e,10)||1;return t=Math.ceil(Math.log(i)/Math.LN10),n=Math.floor(t/3),r=i/Math.pow(10,3*n),r=Math.floor(100*r)/100,0===e&&(r=0),r+["B","KB","MB","GB","TB"][n]},_friendlySinceDate:function(t,n,r){var i=e.moment(t,"X");return 0===i.unix()?a():a(i,n,r)},friendlySinceDate:function(t,n,r,i){return i.fn(e.Handlebars.helpers._friendlySinceDate(t,n,r))},capitalize:function(e){return e[0].toLocaleUpperCase()+e.slice(1)},preventOrphans:function(t,n){var s=n.hash.skipStringsShorterThan||0;return r.isSafeString(t)?new i.SafeString(e.StringHelper.preventOrphans(t.string,s)):e.StringHelper.preventOrphans(t,s)},preventOrphansHtml:function(t,n){return r.isSafeString(t)?new i.SafeString(e.StringHelper.preventOrphansHtml(t.string)):new i.SafeString(e.StringHelper.preventOrphansHtml(t))},renderTrustedMarkup:function(e){if(e)return new i.SafeString(e)},randomLine:function(e){var t,n=e.fn(this);return n?("\n"===(n=n.trim())[0]&&(n=n.slice(1)),"\n"===n[n.length-1]&&(n=n.slice(0,n.length-1)),(t=n.split("\n"))[Math.floor(t.length*Math.random())]):"\x3c!-- no lines to return --\x3e"},configVal:function(e,t){return void 0!==t&&e&&n[e]?(n._index=n._index||{},n._index[e]||(n._index[e]=n[e].reduce((function(e,t){return e[t.value+""]=t.text,e}),{})),n._index[e][t+""]||""):""},eachConfigVal:function(e,t){return(n[e]||[]).map((function(e){return t.fn(e)})).join("")},safetyLevelString:function(e,t){for(var r=0;r<n.safetyLevel.length;r++)if(e.toString()===n.safetyLevel[r].value)return t.fn(n.safetyLevel[r])},privacyString:function(e,t){for(var r=0;r<n.privacy.length;r++)if(e===n.privacy[r].value)return t.fn(n.privacy[r])},licenseString:function(e,t){for(var r=0;r<n.licenseDisplay.length;r++)if(e.toString()===n.licenseDisplay[r].value)return t.fn(n.licenseDisplay[r])},truncate:function(e,t,n,i,s){return r.truncate(e,t,{respectWords:!1!==n,ellipsis:"string"==typeof i?i:"...",escape:void 0===s||s})},shouldTruncateNumber:function(t,n){var r=n.hash.limit||9;return e.Handlebars.helpers.formatNumber(t,n).length>r},json:function(e){var t;return"object"==typeof e?((t=JSON.stringify(e,null,"")).indexOf("\u2028")>-1&&(t=t.replace(/\u2028/g,"\\u2028")),t.indexOf("\u2029")>-1&&(t=t.replace(/\u2029/g,"\\u2029")),t=t.replace(/\//g,"\\/")):t="{}",new i.SafeString(t)},ifCond:function(e,t,n,r){switch(t){case"===":return e===n?r.fn(this):r.inverse(this);case"!==":return e!==n?r.fn(this):r.inverse(this);case"<":return e<n?r.fn(this):r.inverse(this);case"<=":return e<=n?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"in":return(n+"").trim().replace(/\s*[,;]\s*/,",").split(/[,;]/).indexOf(e)>=0?r.fn(this):r.inverse(this);case"||":return e||n?r.fn(this):r.inverse(this);case"&&":return e&&n?r.fn(this):r.inverse(this);default:return r.inverse(this)}},fallback:function(e,t,n){return null==e||""===e?t:e},for:function(e,t,n,r){var i,s="";for(i=e;i<t;i+=n)s+=r.fn(i);return s},log:function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];console[YUI.Env.isServer?"warn":"log"].apply(console,Array.prototype.slice.call(e,0,e.length-1))},protocol:function(){return e.config.flickr.url.protocol},host:function(){return e.config.flickr.url.host},assetRoot:function(){return e.config.flickr.urls.assetRoot},godMessage:function(t){return e.godMessage(t.hash)},flickrConfig:function(t){return e.Object.getValue(e.config.flickr,t.split("."))},chainHelpers:function(){for(var e,t,n,r=new Array(arguments.length),i=0;i<r.length;++i)r[i]=arguments[i];return e=r.shift(),"object"==typeof r[r.length-1]&&(n=r.pop()),r.forEach((function(r){"string"==typeof r&&((t=r.split(" ")).push(n),e=s[t.shift()].apply(this,[e].concat(t)))})),e},multiHighlightString:function(e,t,n){var r,s,a,o,l="",u=0,c=!1;for(e=e||"",t=t||[],e=i.Utils.escapeExpression(e),t=t.sort((function(e,t){return e.end-t.end})),o=0,r=e.length,s=t.length;o<s;o++){for(a=t[o],c=!1;u<a.start&&u<r;)l+=e[u++];for(u<a.end&&(l+='<span class="'+n+'">',c=!0);u<a.end&&u<r;)l+=e[u++];c&&(l+="</span>")}for(;u<r;)l+=e[u++];return new i.SafeString(l)},ifDefined:function(e,t){return void 0===e?t.inverse(this):t.fn(this)},spaceball:function(){return"https://combo.staticflickr.com/pw/images/spaceball.gif"},eq:function(e,t){return e===t},ne:function(e,t){return e!==t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t},lt:function(e,t){return e<t},lte:function(e,t){return e<=t},not:function(e){return!e},and:function(){return Array.prototype.slice.call(arguments,0,-1).every(Boolean)},or:function(){return Array.prototype.slice.call(arguments,0,-1).some(Boolean)},formatRequestID:function(t){return e.moment().utc().format()+"-"+t+"@"+(YUI.Env.isServer?"server":"client")},getAppCookie:function(e,t){return e.getCookie(t)}};for(t in s)e.Handlebars.registerHelper(t,s[t]);function a(t,n,r){var i,s,a,o,l,u,c,f="relative-dates.",p="";return t?(i=e.moment.duration(t.diff(e.moment())),s=Math.round(Math.abs(+i)/1e3),a=Math.round(s/60),o=Math.round(a/60),l=Math.round(o/24),u=Math.round(l/365),r&&(p=i>0?"_FUTURE":"_PAST"),{intlName:f+{s:"SECOND_",ss:"SECONDS_",m:"MINUTE_",mm:"MINUTES_",h:"HOUR_",hh:"HOURS_",d:"DAY_",dd:"DAYS_",M:"MONTH_",MM:"MONTHS_",y:"YEAR_",yy:"YEARS_"}[(c=s<45&&["s",s]||1===a&&["m"]||a<45&&["mm",a]||1===o&&["h"]||o<22&&["hh",o]||1===l&&["d"]||l<=25&&["dd",l]||l<=45&&["M"]||l<345&&["MM",Math.round(l/30)]||1===u&&["y"]||["yy",u])[0]]+(n?"SHORT":"LONG")+p,time:c[1]}):{intlName:f+"NO_DATE"}}e.config.global.HandlebarsHelperIntl.registerWith(e.Handlebars),r={truncate:function(e,t,n){return e||(e=""),n||(n={}),e.length>t&&(e=n.respectWords?e.substr(0,t+1).split(/([^\w])/).reduce((function(e,n){return e.length+n.length>t-1?e:e+=n}),""):e.substr(0,t-1),e+=n.ellipsis),n.escape?e:new i.SafeString(e)},isSafeString:function(e){return e&&"string"==typeof e.string}},n={safetyLevel:[{value:"0",text:"Safe",key:"settings.SAFE"},{value:"1",text:"Moderate",key:"settings.MODERATE"},{value:"2",text:"Restricted",key:"settings.RESTRICTED"}],privacy:[{value:"public",text:"Public",key:"settings.PUBLIC"},{value:"private",text:"Private",key:"settings.PRIVATE"},{value:"friends",text:"Friends",key:"settings.FRIENDS"},{value:"family",text:"Family",key:"settings.FAMILY"},{value:"friendsandfamily",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"}],commentingPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}],printPermission:[{value:0,text:"Only you",key:"settings.ONLY_YOU"},{value:1,text:"Friends",key:"settings.FRIENDS"},{value:2,text:"Family",key:"settings.FAMILY"},{value:3,text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:4,text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:5,text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"},{value:6,text:"Anyone",key:"settings.PUBLIC"}],metaPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}],licenseDisplay:[{value:"0",text:"All rights reserved",key:"settings.ALL_RIGHTS_RESERVED"},{value:"10",text:"Public Domain Work",key:"settings.PUBLIC_DOMAIN_WORK"},{value:"9",text:"Public Domain Dedication (CC0)",key:"settings.PUBLIC_DOMAIN_DEDICATION"},{value:"4",text:"Attribution",key:"settings.ATTRIBUTION"},{value:"5",text:"Attribution-ShareAlike",key:"settings.ATTRIBUTION_SHAREALIKE"},{value:"6",text:"Attribution-NoDerivs",key:"settings.ATTRIBUTION_NODERIVS"},{value:"2",text:"Attribution-NonCommercial",key:"settings.ATTRIBUTION_NONCOMMERCIAL"},{value:"1",text:"Attribution-NonCommercial-ShareAlike",key:"settings.ATTRIBUTION_NONCOMMERCIAL_SHAREALIKE"},{value:"3",text:"Attribution-NonCommercial-NoDerivs",key:"settings.ATTRIBUTION_NONCOMMERCIAL_NODERIVS"},{value:"7",text:"No known copyright restrictions",key:"settings.NO_COPYRIGHT_RESTRICTIONS"},{value:"8",text:"United States government work",key:"settings.US_GOV_WORK"}],licenseSelect:[{value:"0",text:"All rights reserved",key:"settings.ALL_RIGHTS_RESERVED"},{value:"10",text:"Public Domain Work",key:"settings.PUBLIC_DOMAIN_WORK"},{value:"9",text:"Public Domain Dedication (CC0)",key:"settings.PUBLIC_DOMAIN_DEDICATION"},{value:"4",text:"Attribution",key:"settings.ATTRIBUTION"},{value:"5",text:"Attribution-ShareAlike",key:"settings.ATTRIBUTION_SHAREALIKE"},{value:"6",text:"Attribution-NoDerivs",key:"settings.ATTRIBUTION_NODERIVS"},{value:"2",text:"Attribution-NonCommercial",key:"settings.ATTRIBUTION_NONCOMMERCIAL"},{value:"1",text:"Attribution-NonCommercial-ShareAlike",key:"settings.ATTRIBUTION_NONCOMMERCIAL_SHAREALIKE"},{value:"3",text:"Attribution-NonCommercial-NoDerivs",key:"settings.ATTRIBUTION_NONCOMMERCIAL_NODERIVS"}],licenseUrls:[{value:"0",text:"https://flickrhelp.com/hc/en-us/articles/4404078674324-Change-Your-Photo-s-License-in-Flickr"},{value:"1",text:"https://creativecommons.org/licenses/by-nc-sa/2.0/"},{value:"2",text:"https://creativecommons.org/licenses/by-nc/2.0/"},{value:"3",text:"https://creativecommons.org/licenses/by-nc-nd/2.0/"},{value:"4",text:"https://creativecommons.org/licenses/by/2.0/"},{value:"5",text:"https://creativecommons.org/licenses/by-sa/2.0/"},{value:"6",text:"https://creativecommons.org/licenses/by-nd/2.0/"},{value:"7",text:"/commons/usage/"},{value:"8",text:"http://www.usa.gov/copyright.shtml"},{value:"9",text:"https://creativecommons.org/publicdomain/zero/1.0/"},{value:"10",text:"https://creativecommons.org/publicdomain/mark/1.0/"}],addMetaPermission:[{value:"0",text:"Only you",key:"settings.ONLY_YOU"},{value:"1",text:"Friends & Family",key:"settings.FRIENDS_AND_FAMILY"},{value:"2",text:"People you follow",key:"settings.PEOPLE_YOU_FOLLOW"},{value:"3",text:"Any Flickr member",key:"settings.ANY_FLICKR_MEMBER"}]}}),"@VERSION@",{requires:["handlebars-base","url-helper","moment","datatype-number","flipper","handlebars-intl","god-message","intl-number","string-helper"]});YUI.add("localizable",(function(n,e){var t=n.config.global.IntlMessageFormat,a=function(){var n={};return function(e,t){var a=e.join(".");return n.hasOwnProperty(a)?n[a]:n[a]=t()}},r=a(),l=a(),s=function(e,a,r){var s=n.Intl.get("hermes/"+e,null,a);return n.Object.each(s,(function(n,i){s[i]=l([a,e,i],(function(){return new t(n,a,r,{ignoreTag:!0})}))})),s};n.Localizable={appContext:{},langBundles:[],langFormatters:{date:{monthYear:{month:"long",year:"numeric"},monthYearShort:{month:"short",year:"numeric"},month:{month:"long"},year:{year:"numeric"}},number:{USD:{style:"currency",currency:"USD"}}},defaultLang:n.config.lang,getLang:function(){return this.appContext.lang||this.defaultLang},getLangBundles:function(){return e=this.langBundles,t=this.getLang(),a=this.langFormatters,l={},n.Array.each(e,(function(n){l[n]=r([t,n],(function(){return s(n,t,a)}))})),l;var e,t,a,l},intlMessage:function(e){var t=this.getLangBundles();return t.locales=this.getLang(),n.Handlebars.helpers.intlMessage({hash:e,data:{intl:t}})},intlHTMLMessage:function(e){var t=this.getLangBundles();return t.locales=this.getLang(),n.Handlebars.helpers.intlHTMLMessage({hash:e,data:{intl:t}})}}}),"@VERSION@",{requires:["handlebars-base","handlebars-helpers","intl-messageformat"]});YUI.add("experiments-fullscreen",(function(e){var t;(t=function(e){this.flipper=e.flipper,this.appContext=e}).prototype.disableRealFullscreenButtons=function(){return!this.mode},t.prototype.getMode=function(){return this.mode},t.prototype.enableFullscreen=function(){this.mode=!0},t.prototype.disableFullscreen=function(){this.mode=!1},e.namespace("Experiments").Fullscreen=t}),"@VERSION@",{requires:[]});YUI.add("experiments-opt-out",(function(t,e){var p,i=require("hermes-core/flog")(e);(p=function(t){this.appContext=t,this.optOutEnabled=void 0}).prototype.enabled=function(){var t=this.appContext.flipper.isFlipped("reboot_photo_page_optin_type");if(void 0===this.optOutEnabled){if(!this.appContext.flipper.isFlipped("buckets"))return this.optOutEnabled=!0,i.log("Buckets not flipped; optOutEnabled is true"),this.optOutEnabled;switch(t){case"optin":default:this.optOutEnabled=!0;break;case"forced_in":this.optOutEnabled=!1}}return this.optOutEnabled},t.namespace("Experiments").OptOut=p}),"@VERSION@",{requires:[]});YUI.add("murmurhash",(function(h){h.murmurhash=function(h,r){var a,e,t,c,o,d,n,u;for(a=3&h.length,e=h.length-a,t=r,o=3432918353,d=461845907,u=0;u<e;)n=255&h.charCodeAt(u)|(255&h.charCodeAt(++u))<<8|(255&h.charCodeAt(++u))<<16|(255&h.charCodeAt(++u))<<24,++u,t=27492+(65535&(c=5*(65535&(t=(t^=n=(65535&(n=(n=(65535&n)*o+(((n>>>16)*o&65535)<<16)&4294967295)<<15|n>>>17))*d+(((n>>>16)*d&65535)<<16)&4294967295)<<13|t>>>19))+((5*(t>>>16)&65535)<<16)&4294967295))+((58964+(c>>>16)&65535)<<16);switch(n=0,a){case 3:n^=(255&h.charCodeAt(u+2))<<16;case 2:n^=(255&h.charCodeAt(u+1))<<8;case 1:t^=n=(65535&(n=(n=(65535&(n^=255&h.charCodeAt(u)))*o+(((n>>>16)*o&65535)<<16)&4294967295)<<15|n>>>17))*d+(((n>>>16)*d&65535)<<16)&4294967295}return t^=h.length,t=2246822507*(65535&(t^=t>>>16))+((2246822507*(t>>>16)&65535)<<16)&4294967295,t=3266489909*(65535&(t^=t>>>13))+((3266489909*(t>>>16)&65535)<<16)&4294967295,(t^=t>>>16)>>>0}}),"@VERSION@");YUI.add("moola-manager",(function(t,e){"use strict";var o=require("hermes-core/flog")(e);function n(e,n){var i;this.initialAdShown=!1,this.adCouldBeShown=!1,this.dwellTime=0,this.contextOwnerIsPro=!1,this.origin={},this.context={},this.timeoutID=0,this.adCallsCounter=0,this.currentlyShowingAd=!1,this.adPosition=1,e&&n?(this.referrer=e,this.appContext=n):o.error("Attempt to instantiate moola-manager without appContext/referrer"),i=function(e){var o={};e.origin===t.url()&&"string"==typeof e.data&&e.data.split&&(e.data.split("&").map((function(t){var e=t.split("=");o[e[0]]=e[1]})),"true"===o.no_ad?t.fire("no_ad_event",o.ad_id):t.fire("ad_event",o.ad_id))},t.config.win&&t.config.win.addEventListener("message",i,!1)}n.prototype.markAdAsSeen=function(){this.initialAdShown=!0,this.resetPhotoAdsCounter(),this.adCallsCounter--},n.prototype.beaconDwellTime=function(){var e=Date.now()-this.dwellTime;this.dwellTime=0,t.rapidTracker.beacon(this.name,"adDwellTime",{dwell:e})},n.prototype.adIsUnloading=function(){this.beaconDwellTime(),clearTimeout(this.timeoutID),this.currentlyShowingAd=!1},n.prototype.adIsLoading=function(){this.currentlyShowingAd=!0},n.prototype.isEnabled=function(){var t=this.appContext.getViewer().signedIn,e=this.appContext.getViewer().signedIn&&this.appContext.getViewer().isPro;return!(this.appContext.forceServerRender||this.appContext.flipper.isFlipped("moola_killswitch")||t&&e)},n.prototype.adNext=function(){var e,o,n,i,r,s;return!(YUI.Env.isServer||!this.context.current)&&(this.adPosition++,e=this.isEnabled(),o=this.adCouldBeShown,i=this.enoughPhotoViewsAccrued(),n=this.contextOwnerIsPro,r=this.adjacentPhotosAreAdFriendly(),s=this.referrerIsDenied(),e&&o&&i&&!n&&r&&!s&&t.rapidTracker.beacon(this.name,"adSlotAvailable"),e&&o&&!n&&i&&r&&!s)},n.prototype.resetPhotoAdsCounter=function(){this.appContext.cookieCatcher.setCookieIfAllowed("adCounter",0,{path:"/",domain:"flickr.com"})},n.prototype.enoughPhotoViewsAccrued=function(){var e=t.Cookie.get("adCounter",Number);return(e=e||0)>=this.getThreshold()},n.prototype.adjacentPhotosAreAdFriendly=function(){return"next"===this.origin.arrow?this.context.next.adFriendly&&this.context.current.adFriendly:this.context.previous.adFriendly&&this.context.current.adFriendly},n.prototype.referrerIsDenied=function(){var t=[];return this.appContext.getViewer().signedIn||t.push("/"),t.indexOf(this.appContext.getPreviousURL())>-1},n.prototype.setAdCouldBeShown=function(t,e,n){void 0===t&&(t=!1),e&&n?(this.origin.arrow=e,this.origin.url=n):t&&(o.info("Attempt to schedule an ad without setting nav direction or URL"),t=!1),this.adCouldBeShown=t},n.prototype.updateContext=function(e){var o;this.contextOwnerIsPro=!1,(-1!==t.Array.indexOf(["photostream-models","set-models","photoList-models","feed-batch-models"],e.type)||/^\/search\/\?.+=[0-9]+@N[0-9]{2}.*/.test(e.entryURL))&&(o=e.current.getValue("owner"))&&(this.contextOwnerIsPro=o.getValue("isPro")),this.context.previous=this.extractKeyDataFromPhotoModel(e.prev),this.context.current=this.extractKeyDataFromPhotoModel(e.current),this.context.next=this.extractKeyDataFromPhotoModel(e.next)},n.prototype.getThreshold=function(){var e;try{e=this.initialAdShown?t.config.flickr.moola.threshold[this.referrer].subsequent:t.config.flickr.moola.threshold[this.referrer].initial}catch(t){o.info("There is no matching value for referrer in the ad/referrer config",{referrer:this.referrer,err:t}),e=100}return e},n.prototype.updatePhotoAdsCounter=function(){var e=t.Cookie.get("adCounter",Number);return e=e||0,this.appContext.cookieCatcher.setCookieIfAllowed("adCounter",++e,{path:"/",domain:"flickr.com"}),e},n.prototype.extractKeyDataFromPhotoModel=function(t){var e={};return t&&(e={adFriendly:0===t.getValue("safetyLevel"),url:this.getBackgroundImage(t),link:t.getValue("url")}),e},n.prototype.getBackgroundImage=function(t){var e,o,n,i=40;return e={width:101*(o=this.appContext.getViewer().getPixelRatio()),height:i*o},n={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},t.getSizeToFit(e,n).url},n.prototype.handleInfolinks=function(t,e){var o=this.appContext.viewportData.getWidth();e||o<735||this.appContext.getViewer().signedIn||this.appContext.getViewer().isPro||t?this.stopInfolinksAdUnit():this.injectInfolinksAdUnit()},n.prototype.injectInfolinksAdUnit=function(){if(this.infolinksActiveOnPage()||this.infolinksScriptOnPage())window.postMessage(JSON.stringify({message:"RESTORE",apiK:"lJKHQWQlPm"}),"*");else{var t=document.createElement("script");window.infolinks_pid=3290681,window.infolinks_wsid=0,t.src="https://resources.infolinks.com/js/infolinks_main.js",t.type="text/javascript",t.classList.add("flickr_infolinks_script"),t.async=!0,document.body.appendChild(t)}},n.prototype.infolinksActiveOnPage=function(){return!!document.querySelector("#IL_INSEARCH")},n.prototype.infolinksScriptOnPage=function(){return!!document.querySelector(".flickr_infolinks_script")},n.prototype.stopInfolinksAdUnit=function(){this.infolinksActiveOnPage()&&window.postMessage(JSON.stringify({message:"DESTROY",apiK:"lJKHQWQlPm"}),"*")},n.prototype.canShowAd=function(t){var e=!this.appContext.flipper.isFlipped("moola-killswitch"),o=0===t.getValue("safetyLevel"),n=t.getValue("owner").getValue("isPro"),i=this.appContext.getViewer();return!!e&&(!n&&(!(!n&&!o)&&(!i.signedIn||!i.isPro)))},n.prototype.signalAdRequest=function(e){if(t.Snowplough){if(!e)return void t.Snowplough.sendStructuredEvent({category:"ad",action:"ad_request",label:e.adUnit});var n=[];e.get("photo")&&(n=n.concat(t.Snowplough.getPhotoContextFromModel(e.get("photo")))),n=n.concat(t.Snowplough.getAdsContextEvents({linkID:e.adEventStitch||null})),t.Snowplough.sendStructuredEvent({category:"ad",action:"ad_request",label:e.adUnit},n)}else o.error("Missing Y.Snowplough in AdManager.prototype.signalAdRequest")},n.prototype.getHashedAdValue=function(e){var o=t.config.win.location.href+(t.config.flickr.request?t.config.flickr.request.id:window.reqId)+e+(new Date).getTime().toString()+this.getRandomInteger();return t.murmurhash(o,o+"there is no need to be so salty")},n.prototype.getRandomInteger=function(){var t=1e11;return Math.floor(9e11*Math.random()+t)},n.prototype.getAdPositioning=function(t){var e,o,n=t.one(".moola-container");return n&&(o=(e=n.getDOMNode().getBoundingClientRect()).top.toString()+e.right.toString()+e.bottom.toString()+e.left.toString()),o},n.prototype.refreshAdUnit=function(){asc.cmd.push((function(){asc.refresh()}))},n.prototype.processAdsOnPage=function(){asc.cmd.push((function(){asc.processAdsOnPage()}))},n.prototype.destroyAdUnitsOnPage=function(){asc.cmd.push((function(){asc.destroy()}))},n.prototype.signalNonAdRequest=function(e){if(t.Snowplough){if(!e)return void t.Snowplough.sendStructuredEvent({category:"ad",action:"no_ad_request"});var n=[];e.get("photo")&&(n=n.concat(t.Snowplough.getPhotoContextFromModel(e.get("photo")))),t.Snowplough.sendStructuredEvent({category:"ad",action:"no_ad_request"},n)}else o.error("Missing Y.Snowplough in AdManager.prototype.signalNonAdRequest")},n.prototype.detectAdBlocker=function(){var t=document.createElement("div"),e=document.querySelector("html");t.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",t.style.height="1px",document.body.appendChild(t),t.offsetHeight||e.classList.add("user-moola-block"),t.remove()},n.prototype.getAdBlockStatus=function(){return document.querySelector("html").classList.contains("user-moola-block")},t.namespace("AdManager"),t.AdManager=n}),"@VERSION@",{requires:["cookie","io-base","json-parse","murmurhash","url"]});