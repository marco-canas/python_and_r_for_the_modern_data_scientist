YUI.add("photo-exif-models",(function(e){function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{name:this.name,remote:{read:function(r){return e.ModelFetchers["flickr-photos-getExif"].run(r,this.appContext).then((function(e){return e}),(function(){}))}},attributes:{camera:{},cameraType:{},cameraURL:{},cameraMake:{},cameraModel:{},data:{},exposureProgram:{},exposureTime:{},flash:{},flashFired:{},flashModeOff:{},flashModeOn:{},flashModeAuto:{},fNumber:{},focalLength:{},iso:{},lensModel:{},software:{},meteringMode:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getExif-fetcher"]});YUI.add("flickr-photos-getExif-fetcher",(function(e,a){"use strict";e.namespace("ModelFetchers")["flickr-photos-getExif"]={run:function(o,t){var r,s=o.id,l=this;return r={photo_id:s,extras:"camera"},e.Promise.all([t.callAPI("flickr.photos.getExif",r),t.getModelRegistry("photo-exif-models")]).then((function(e){return l._processResponse(e,o,t)}),(function(r){return 2===r.code?t.getModelRegistry("photo-exif-models").then((function(e){return e.addOrUpdate({id:o.id})})):e.FetcherErrorLogger(a)(r)}))},_processResponse:function(e,a,o){var t,r,s,l=e[0],f=e[1];if(l.photo)return t=e[0].photo.exif||[],r=e[0].photo.camera,s={id:a.id,camera:r,cameraType:e[0].photo.camera_type,cameraURL:e[0].photo.camera_url,data:[],flashFired:null,flashModeOff:null,flashModeOn:null,flashModeAuto:null,meteringMode:null},t.forEach((function(e){var a,o,t;e.tag&&e.raw&&("string"==typeof e.tag&&(0===(o=e.tag.search(/([A-Z][a-z])/))?o=1:-1===o&&(o=e.tag.length),t=e.tag.slice(0,o).toLowerCase()+e.tag.slice(o)),t&&("make"===t.toLowerCase()&&(s.cameraMake=e.raw.content),"model"===t.toLowerCase()&&(s.cameraModel=e.raw.content)),s[t]=a=e.raw.content,s.data.push({label:e.label,value:a}))})),[["lensModel","lens"]].forEach((function(e){for(var a=e.shift();e.length&&void 0===s[a];)s[a]=s[e.shift()]})),s.flash&&(s.flash.match(/on|fired/i)&&!s.flash.match(/did not/i)?s.flashFired=!0:s.flashFired=!1,s.flash=s.flash.substr(0,1).toUpperCase()+s.flash.substr(1).toLowerCase(),s.flash.match(/auto/i)?s.flashModeAuto=!0:s.flash.match(/on/i)?s.flashModeOn=!0:s.flash.match(/off|no flash/i)&&(s.flashModeOff=!0)),f.addOrUpdate(s)}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-exif-models"]});