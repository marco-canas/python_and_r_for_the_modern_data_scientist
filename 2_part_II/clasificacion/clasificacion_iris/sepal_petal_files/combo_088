YUI.add("tour-tooltip-helper",(function(e,t){require("hermes-core/flog")(t);e.TourTooltipHelper=function(t,o){var r,l,a,s=o.tourTooltips||{},n=Object.keys(s)[0],i=1,c=Object.keys(s).length||3,p=new e.TemplateLibraryHelper(t),u=o.container||e.config.window,d=o.showPulse||!0,f=e.mix({langBundles:["common","feed"],appContext:t},e.Localizable),m={createToolTip:function(){var m=p.getTemplate("tour-tooltip",o.viewParams),T=u.one(s[n].target);if(T){l=s[n].nextTooltipId,r=l?f.intlMessage({intlName:"feed.SHOW_NEXT_TIP"}):f.intlMessage({intlName:"common.DONE"});var w=T.one(".new-feature-pulse");if(a=new e.Views.FluidDroparound({appContext:t,htmlMessage:m({message:s[n].message,tooltipCtaText:r,progress:i,total:c}),showDropArrow:!0,dismissOnOverlayClick:!0,observePageResize:!0,anchorElement:T,minVerticalSpace:400,width:275,preferLeft:!1,closeOnScroll:!0,anchorOffsetVertical:0,classList:"over-modal",overlayClassList:"over-modal"}),d){if(!w){var g={featurePulseID:".pulse-"+i,featurePulseOn:!1,waveOneColor:"#128fdc",waveTwoColor:"#128fdc",waveThreeColor:"#128fdc"},h=p.getTemplate("new-feature-pulse",g);w=e.Node.create(h()),T.prepend(w)}a.on("closeDroparound",(function(e){w.setAttribute("data-pulse-on",!1)})),w.setAttribute("data-pulse-on",!0)}a.show();var v=a.get("container");a.registerEventHandler(v.delegate("click",this.showNextTooltip.bind(this),".cta"))}else this.showNextTooltip()},showNextTooltip:function(){l?(a.close(),i+=1,n=s[n].nextTooltipId,this.createToolTip()):(a.close(),n=Object.keys(s)[0],i=1)},startTooltips:function(){i=1,n=Object.keys(s)[0],this.createToolTip()}};return e.augment(m,e.EventTarget),m}}),"@VERSION@",{requires:["dropdown","fluid-droparound-view","event-custom","template-lib-helper"],langBundles:["common","feed"]});YUI.add("hermes-lang-feed_es-us",(function(e,a){e.Intl.add("hermes/feed","es-US",{TITLE_PHOTO_BY:[{type:1,value:"title"},{type:0,value:" por "},{type:1,value:"username"}],X_PHOTOS:[{type:6,value:"count",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"}],X_MANY_MORE:[{type:0,value:"+ "},{type:1,value:"count"},{type:0,value:" más"}],READ_MORE:[{type:0,value:"Leer más"}],RECOMMENDED:[{type:0,value:"Recomendadas"}],HIDE_THIS_RECOMMENDATION:[{type:0,value:"Ocultar esta recomendación"}],HIDE_THIS_POST:[{type:0,value:"Ocultar esta publicación"}],HIDE_ALL_POST_LIKE_THIS:[{type:0,value:"Ocultar todas las publicaciones como esta"}],HIDE_ALL_POST_FROM:[{type:0,value:"Ocultar todas las publicaciones de "},{type:1,value:"username"}],TURN_OFF_NOTIFICATION_POST:[{type:0,value:"Desactivar las notificaciones para esta publicación"}],FEATURED:[{type:0,value:"Destacado"}],LOAD_MORE:[{type:0,value:"Cargar más"}],VISIT_GROUP:[{type:0,value:"Ver grupo"}],FEED_SLOW:[{type:0,value:"En este momento, tenemos problemas para mostrar esta fuente. Vuelve a intentarlo."}],FEED_NOTHING_TO_SHOW:[{type:0,value:"No hay actividad para mostrar en este momento."}],VIEW_ALL:[{type:0,value:"Ver todo"}],FAVES_COUNT:[{type:6,value:"favesCount",options:{one:{value:[{type:7},{type:0,value:" favorito"}]},other:{value:[{type:7},{type:0,value:" favoritos"}]}},offset:0,pluralType:"cardinal"}],FAVES_COUNT_FORMATTED:[{type:6,value:"favesCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" Favorito"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" Favoritos"}]}},offset:0,pluralType:"cardinal"}],FAVES_99:[{type:0,value:"Más de 99 favoritos"}],COMMENTS_COUNT:[{type:6,value:"commentsCount",options:{one:{value:[{type:7},{type:0,value:" comentario"}]},other:{value:[{type:7},{type:0,value:" comentarios"}]}},offset:0,pluralType:"cardinal"}],COMMENTS_COUNT_FORMATTED:[{type:6,value:"commentsCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" Comentario"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" Comentarios"}]}},offset:0,pluralType:"cardinal"}],COMMENTS_99:[{type:0,value:"Más de 99 comentarios"}],VIEWS_COUNT:[{type:6,value:"viewsCount",options:{one:{value:[{type:7},{type:0,value:" vista"}]},other:{value:[{type:7},{type:0,value:" vistas"}]}},offset:0,pluralType:"cardinal"}],VIEWS_COUNT_CAPITAL:[{type:6,value:"viewsCount",options:{one:{value:[{type:7},{type:0,value:" Vista"}]},other:{value:[{type:7},{type:0,value:" Vistas"}]}},offset:0,pluralType:"cardinal"}],VIEWS_COUNT_CAPITAL_FORMATTED:[{type:6,value:"viewsCount",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" Vista"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" Vistas"}]}},offset:0,pluralType:"cardinal"}],TITLE_QUOTES:[{type:0,value:"“"},{type:1,value:"title"},{type:0,value:"”"}],GROUPS_ACTIVITY_LABEL:[{type:0,value:"Actividad del grupo"}],CARD_COUNT_PHOTOS_ONLY:[{type:6,value:"photosCount",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" publicadas"}],CARD_COUNT_VIDEOS_ONLY:[{type:6,value:"videosCount",options:{one:{value:[{type:7},{type:0,value:" video"}]},other:{value:[{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" publicados"}],CARD_COUNT_PHOTOS_VIDEOS:[{type:6,value:"photosCount",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" "},{type:6,value:"videosCount",options:{one:{value:[{type:0,value:"y "},{type:7},{type:0,value:" video"}]},other:{value:[{type:0,value:"y "},{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" publicados"}],LEARN_MORE:[{type:0,value:"Más información"}],SPONSORED:[{type:0,value:"Patrocinado por"}],PRO_UPSELL_TITLE:[{type:0,value:"Salta de alegría :)"}],PRO_UPSELL_BENEFITS:[{type:0,value:"Navegación sin anuncios, estadísticas avanzadas y descuentos en envíos"}],PRO_UPSELL_BENEFITS2:[{type:0,value:"Navegación sin anuncios, estadísticas avanzadas y un 20 % de descuento en el plan Photography de Adobe Creative Cloud"}],PRO_UPSELL_BENEFITS_2:[{type:0,value:"Navegación sin anuncios, estadísticas avanzadas y más"}],CARD_EXPLANATION_WHY:[{type:0,value:"¿Por qué aparece esta información?"}],CARD_EXPLANATION_REC:[{type:0,value:"Esta es una recomendación basada en tus favoritos y en las personas que sigues."}],CARD_EXPLANATION_FEATURED:[{type:0,value:"Esta es una recomendación que seleccionaron cuidadosamente nuestros editores."}],CARD_EXPLANATION_GROUP:[{type:0,value:"En tu fuente de noticias, podrás ver resúmenes de tu actividad reciente con tus grupos favoritos."}],FEED_GROUP_ONBOARDING_TITLE:[{type:0,value:"NUEVO: actividad del grupo"}],FEED_GROUP_ONBOARDING_DESCRIPTION:[{type:0,value:'Esta es la actividad reciente de un grupo en el que participas. Verás más información de tus grupos favoritos. Para ajustar la visualización, <a href="/groups">ingresa en tus Grupos</a>. Toca la estrella para ver la actividad reciente de ese grupo.'}],FEED_ONBOARDING_FEEDBACK_TITLE:[{type:0,value:"¿Te gusta tu nueva fuente de Flickr?"}],FEED_ONBOARDING_FEEDBACK_DESCRIPTION:[{type:0,value:"Nos dedicamos a mejorar tu experiencia de visualización. También optimizamos nuestros algoritmos para mostrarte más de lo que te gusta."}],FEED_ONBOARDING_FEEDBACK_LIKE:[{type:0,value:"Me gusta"}],FEED_ONBOARDING_FEEDBACK_NEEDS_IMPROVEMENT:[{type:0,value:"Necesita mejoras"}],ACCESSIBLE_CARD_SUMMARY:[{type:6,value:"count",options:{one:{value:[{type:1,value:"ownername"},{type:0,value:" publicó "},{type:1,value:"count"},{type:0,value:" foto."}]},other:{value:[{type:1,value:"ownername"},{type:0,value:" publicó "},{type:1,value:"count"},{type:0,value:" fotos."}]}},offset:0,pluralType:"cardinal"}],NAV_GROUPS_ONLY:[{type:0,value:"Grupos"}],NAV_PEOPLE_ONLY:[{type:0,value:"Personas"}],NAV_ALL_ACTIVITY:[{type:0,value:"Toda la actividad"}],NOTHING_TO_SHOW:[{type:0,value:"Por el momento, no hay más actividad."}],REFRESH_TO_SEE_NEW_ACTIVITY:[{type:0,value:"Actualiza para ver actividad nueva."}],REFRESH_WHEN_YOURE_DONE:[{type:0,value:"Actualizar cuando hayas terminado"}],JOIN_GROUPS_FEED_ACTIVITY:[{type:0,value:"Únete a algunos grupos para ver la actividad reciente"}],NOTHING_TO_SHOW_NOONE_WITH_PHOTOS:[{type:0,value:"Al parecer, no sigues a nadie que tenga fotos."}],NOTHING_TO_SHOW_FRIENDS_EXPLORE:[{type:0,value:'<a href="/import/people/" data-track="feedFindFriends">Busca a tus amigos de Facebook, Yahoo Mail y Gmail</a>.'}],CHECK_OUT_OUR_PHOTOGRAPHERS:[{type:0,value:"Descubrir fotos de nuestros fotógrafos destacados"}],RECOVERY_ADD_EMAIL_TITLE:[{type:0,value:"Añade un correo electrónico de recuperación a tu cuenta"}],RECOVERY_IF_FORGET_PASSWORD:[{type:0,value:"Si olvidaste tu contraseña o no puedes acceder a tu cuenta, usaremos esta información para ayudarte a recuperar el acceso."}],LOGIN_EMAIL:[{type:0,value:"Correo electrónico para iniciar sesión:"}],RECOVERY_EMAIL:[{type:0,value:"Correo electrónico de recuperación:"}],RECOVERY_ENTER_EMAIL:[{type:0,value:"Ingresar dirección de correo electrónico"}],ADD_RECOVERY_EMAIL:[{type:0,value:"Añadir correo electrónico de recuperación"}],RECOVERY_NAH:[{type:0,value:"No, no me importa la seguridad"}],RECOVERY_NOT_NOW:[{type:0,value:"Ahora no"}],RECOVERY_CONFIRM_TITLE:[{type:0,value:"Confirma tu dirección de correo electrónico de recuperación"}],RECOVERY_CHECK_EMAIL_VERIFY:[{type:0,value:"Comprueba tu correo electrónico en <span>"},{type:1,value:"email"},{type:0,value:"</span>."}],RECOVERY_YOU_MAY_RECEIVE_EMAILS:[{type:0,value:"Recibirás correos electrónicos de Flickr y Yahoo. Haz clic en el enlace en cada correo electrónico para completar la confirmación."}],RECOVERY_GOT_IT:[{type:0,value:"Entendido"}],RECOVERY_INVALID_EMAIL:[{type:0,value:"Esta dirección correo electrónico no es válida."}],RECOVERY_EMAIL_IN_USE:[{type:0,value:"Esta dirección de correo electrónico ya se está usando."}],RECOVERY_EMAIL_ALREADY_YOURS:[{type:0,value:"Ya estás usando esta dirección de correo electrónico."}],RECOVERY_EMAIL_SOMETHING_WENT_WRONG:[{type:0,value:"Algo salió mal. Vuelve a intentarlo más tarde."}],VIEW_POST:[{type:0,value:"Ver publicación"}],PHOTO_BY:[{type:0,value:"Foto por "},{type:1,value:"username"}],VIDEO_BY:[{type:0,value:"Video de "},{type:1,value:"username"}],FLICKR_EDITORIAL:[{type:0,value:"Flickr Editorial"}],FLICKR_HELP:[{type:0,value:"Ayuda de Flickr"}],OFFICIAL:[{type:0,value:"Oficial"}],FEED_FALLBACK:[{type:0,value:'Mientras tanto, disfruta de algunas fotos de la sección <a href="/explore">Explorar</a>:'}],VIEW_IN_PHOTOSTREAM:[{type:0,value:"Ver en la galería de fotos"}],VIEW_GROUP_POOL:[{type:0,value:"Ver grupo de grupo"}],YOUR_ALL_TIME_VIEWS:[{type:0,value:"Historial completo de tus vistas"}],TODAYS_VIEWS:[{type:0,value:"Vistas de hoy"}],GET_STATS_WITH_PRO:[{type:0,value:"Recibe estadísticas diarias con Flickr Pro"}],EXPLORE_POPULAR_PHOTOS:[{type:0,value:"Explorar fotos populares"}],GROUPS_FOR_YOU:[{type:0,value:"Grupos para ti"}],FLICKR_BLOG:[{type:0,value:"Blog de Flickr"}],CLICK_TO_LEARN_MORE:[{type:0,value:"Haz clic para aprender más."}],TIP_FILTER:[{type:0,value:"Elige cómo quieres filtrar tu actividad: Todas las actividades, personas, amigos y familia, o grupos."}],TIP_CONTEXT_MENU:[{type:0,value:"Puedes silenciar grupos o dejar de seguir a personas, así como compartir una galería o enviar un mensaje."}],TIP_LAYOUT:[{type:0,value:"Elije el formato de tu actividad. Los formatos con imágenes más grandes también muestran más información de la fotografía."}],SHOW_NEXT_TIP:[{type:0,value:"Siguiente"}],THIS_PAGE_RETIRED_SOON:[{type:0,value:'Esta página se retirará próximamente. <a class="feed-link" href="'},{type:1,value:"feedUrl"},{type:0,value:'">Échale un vistazo a la nueva experiencia.</a>'}],PEOPLE_I_FOLLOW:[{type:0,value:"Personas a las que sigo"}],FRIENDS_AND_FAMILY:[{type:0,value:"Amigos y familia"}],PEOPLE_TO_FOLLOW:[{type:0,value:"Personas para seguir"}],GROUP_DISCUSSIONS:[{type:0,value:"Debates de grupo"}],FILTER_ALL_ACTIVITY:[{type:0,value:"Toda actividad"}],FILTER_FRIENDS_AMP_FAMILY:[{type:0,value:"Amigos y familiares"}],SHOW_NEWER_ITEMS:[{type:0,value:"Mostrar artículos más recientes"}],ALL_TIME_VIEWS:[{type:0,value:"Historial completo de vistas"}],PEOPLE_YOU_FOLLOW:[{type:0,value:"Personas a las que sigues"}],EMPTY_FRIENDS_AND_FAMILY_1:[{type:0,value:"En la actualidad no hay publicaciones de tus familiares o amigos."}],EMPTY_FRIENDS_AND_FAMILY_2:[{type:0,value:'Puedes marcar como Amigo o Familiar a cualquier persona pasando el cursor sobre el botón de Siguiendo o en la <a class="people-link" href="'},{type:1,value:"peopleUrl"},{type:0,value:'">página de Personas a las que sigues.</a>.'}],EMPTY_PEOPLE_1:[{type:0,value:"En la actualidad no hay publicaciones de las personas a las que sigues."}],CHECK_OUT_RECS_BELOW:[{type:0,value:"Dale un vistazo a los fotógrafos recomendados a continuación y empieza a seguir a personas para ver su contenido aquí."}],EMPTY_GROUPS_1:[{type:0,value:"En la actualidad no hay publicaciones de tus grupos."}],EMPTY_GROUPS_2:[{type:0,value:'Ve a tu <a class="groups-link" href="'},{type:1,value:"groupsUrl"},{type:0,value:'">Página de grupos</a> para ver grupos que te recomendamos, o usa la barra de Búsqueda para encontrar grupos que se basan en tus intereses.'}],NO_ACTIVITY_RIGHT_NOW:[{type:0,value:"No hay actividad que mostrar en este momento."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-tour-tooltip",(function(t,e){var l=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,l,a,n){var s,o=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,i="function",p=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="tour-tooltip">\n\t<p class="message">'+p(typeof(s=null!=(s=c(l,"message")||(null!=e?c(e,"message"):e))?s:r)===i?s.call(o,{name:"message",hash:{},data:n,loc:{start:{line:2,column:20},end:{line:2,column:31}}}):s)+'</p>\n\t<div class="actions">\n\t\t<span class="cta">'+p(typeof(s=null!=(s=c(l,"tooltipCtaText")||(null!=e?c(e,"tooltipCtaText"):e))?s:r)===i?s.call(o,{name:"tooltipCtaText",hash:{},data:n,loc:{start:{line:4,column:20},end:{line:4,column:38}}}):s)+'</span>\n\t\t<span class="progress">'+p(typeof(s=null!=(s=c(l,"progress")||(null!=e?c(e,"progress"):e))?s:r)===i?s.call(o,{name:"progress",hash:{},data:n,loc:{start:{line:5,column:25},end:{line:5,column:37}}}):s)+"/"+p(typeof(s=null!=(s=c(l,"total")||(null!=e?c(e,"total"):e))?s:r)===i?s.call(o,{name:"total",hash:{},data:n,loc:{start:{line:5,column:38},end:{line:5,column:47}}}):s)+"</span>\n\t</div>\n</div>"},useData:!0}),a={};t.Array.each([],(function(e){var l=t.Template.get("hermes/"+e);l&&(a[e]=l)})),t.Template.register("hermes/tour-tooltip",(function(e,n){return(n=n||{}).partials=n.partials?t.merge(a,n.partials):a,l(e,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-new-feature-pulse",(function(e,n){var l=e.Template.Handlebars.revive({1:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" animation-iteration-count: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"featurePulseIterationCount")||(null!=n?r(n,"featurePulseIterationCount"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"featurePulseIterationCount",hash:{},data:a,loc:{start:{line:14,column:98},end:{line:14,column:128}}}):t)+"; "},3:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveOneColor")||(null!=n?r(n,"waveOneColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveOneColor",hash:{},data:a,loc:{start:{line:15,column:75},end:{line:15,column:91}}}):t)+"; "},5:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveTwoColor")||(null!=n?r(n,"waveTwoColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveTwoColor",hash:{},data:a,loc:{start:{line:17,column:75},end:{line:17,column:91}}}):t)+"; "},7:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveThreeColor")||(null!=n?r(n,"waveThreeColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveThreeColor",hash:{},data:a,loc:{start:{line:19,column:77},end:{line:19,column:95}}}):t)+"; "},compiler:[8,">= 4.3.0"],main:function(e,n,l,o,a){var t,r,u=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,s="function",c=e.escapeExpression,p=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\n\n<div class="new-feature-pulse '+c(typeof(r=null!=(r=p(l,"featurePulseID")||(null!=n?p(n,"featurePulseID"):n))?r:i)===s?r.call(u,{name:"featurePulseID",hash:{},data:a,loc:{start:{line:13,column:30},end:{line:13,column:48}}}):r)+'" data-pulse-on="'+c(typeof(r=null!=(r=p(l,"featurePulseOn")||(null!=n?p(n,"featurePulseOn"):n))?r:i)===s?r.call(u,{name:"featurePulseOn",hash:{},data:a,loc:{start:{line:13,column:65},end:{line:13,column:83}}}):r)+"\" >\n    <div class='wave'        style=\""+(null!=(t=p(l,"if").call(u,null!=n?p(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:36},end:{line:14,column:137}}}))?t:"")+"\n                                    "+(null!=(t=p(l,"if").call(u,null!=n?p(n,"waveOneColor"):n,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:15,column:36},end:{line:15,column:100}}}))?t:"")+"\"></div>\n    <div class='wave delay1' style=\""+(null!=(t=p(l,"if").call(u,null!=n?p(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:16,column:36},end:{line:16,column:137}}}))?t:"")+"\n                                    "+(null!=(t=p(l,"if").call(u,null!=n?p(n,"waveTwoColor"):n,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:17,column:36},end:{line:17,column:100}}}))?t:"")+"\"></div>\n    <div class='wave delay2' style=\""+(null!=(t=p(l,"if").call(u,null!=n?p(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:18,column:36},end:{line:18,column:137}}}))?t:"")+"\n                                    "+(null!=(t=p(l,"if").call(u,null!=n?p(n,"waveThreeColor"):n,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:19,column:36},end:{line:19,column:104}}}))?t:"")+'"></div>\n</div>'},useData:!0}),o={};e.Array.each([],(function(n){var l=e.Template.get("hermes/"+n);l&&(o[n]=l)})),e.Template.register("hermes/new-feature-pulse",(function(n,a){return(a=a||{}).partials=a.partials?e.merge(o,a.partials):o,l(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("notifications-panel-view",(function(t,i){var e=require("hermes-core/flog")(i);t.namespace("Views")[this.name]=t.Base.create("notifications-panel-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.params=i,this.notificationsHelper=new t.NotificationsHelper(this.appContext),this.selectedTabId="main",this.unreadCounts={main:void 0,admin:void 0},this.seenNotifs={main:!1,admin:!1},this.listViews={main:void 0,admin:void 0},this.tourTooltips={tooltipA:{message:this.intlMessage({intlName:"notifications.TIP_SETTINGS"}),target:".notifications-panel .actions .settings-link",nextTooltipId:"tooltipB"},tooltipB:{message:this.intlMessage({intlName:"notifications.TIP_MUTE"}),target:".notifications-panel .notification-item .notification-context-menu-button",nextTooltipId:"tooltipC"},tooltipC:{message:this.intlMessage({intlName:"notifications.TIP_GROUPS"}),target:'.notifications-panel .nav-container .tabs [data-tab-id="admin"]'}}},subviewConfig:{},loadState:function(){var i=this,e=[],n=this.appContext.getViewer();return e.push(this.appContext.getModel("person-notifications-models",n.nsid).then((function(t){var e=t.getValue("unseenNotificationCounts");i.notificationsModel=t,i.unreadCounts={main:e.default||0,admin:e.groupsYouAdmin||0},i.unreadCounts.main=i.unreadCounts.main>=100?"99+":i.unreadCounts.main,i.unreadCounts.admin=i.unreadCounts.admin>=100?"99+":i.unreadCounts.admin}))),e.push(this.appContext.getModel("person-groups-models",n.nsid).then((function(t){i.personGroupsModel=t}))),t.Promise.all(e)},buildContainer:function(){this.setContainerWithTemplate("notifications-panel",{width:this.params.width,height:this.params.height,unreadCounts:this.unreadCounts,showAdminTab:this.personGroupsModel.getValue("adminCount")>0})},activate:function(){var i=this,e=this.get("container");return this.scrollContainer=e.one(".list-container"),this.tabNodes={},this.tabContainer=e.one(".tabs"),this.tabNodes.main=this.tabContainer.one('.tab[data-tab-id="main"]'),this.tabNodes.admin=this.tabContainer.one('.tab[data-tab-id="admin"]'),this.loadTopButton=e.one(".load-top-button"),this.getSubviews().then((function(){i.insertSubviews()})).then((function(){return i.scrollContainer&&(i.scrollContainerHeight=i.scrollContainer.get("clientHeight"),i.registerEventHandler(i.scrollContainer.on("scroll",t.betterThrottle(i.handleScroll.bind(i),100,i,!1)))),i.registerEventHandler(i.tabContainer.delegate("click",i.handleTabClick.bind(i),".tab")),i.registerEventHandler(e.on("click",i.handleAnalyticsClicks.bind(i))),i.loadInitial(),i.registerEventHandler(i.appContext.flapp.before("navigate",function(t){var e=t.details[0].url,n=i.notificationsModel.getValue("unseenNotificationCounts");e&&(e.match(/^.+(\/notifications)$/)?(i.notificationsModel.setValue("unseenNotificationCounts",Object.assign(n,{total:0})),i.seenNotifs={main:!1,admin:!1}):i.notificationsModel.setValue("unseenNotificationCounts",{}))}.bind(i))),i.registerEventHandler(e.delegate("click",function(t){if(!(t.metaKey||t.ctrlKey||t.which&&2===t.which)){t.target;var i=t.target.ancestor("a",!0).getAttribute("href");i&&(t.stopPropagation(),t.preventDefault(),window.location.href=i)}}.bind(i),".notification-photo-thumb, .notification-item .headline-container a, .notification-item .info-container a")),i.tourTooltipStart=e.one(".tour-tooltip-start"),i.tourTooltipStart&&i.registerEventHandler(i.tourTooltipStart.on("click",i.handleTourTooltipClick.bind(i))),i.registerEventHandler(i.loadTopButton.on("click",i.reloadList.bind(i))),i.registerEventHandler(t.on("notificationsMenu:unseenCountPolled",i.handleUnseenPolled.bind(i))),i}))},loadInitial:function(){var i=this,e=this.listViews.main.loadInitial();return i.currentLoadPromise=e,e.then((function(n){return i.currentLoadPromise!==e?t.Promise.resolve():i.listViews.main.appendItems(n)})).then((function(){i.loadTooltipHelper(),i.seenNotifs.main=!0}))},handleTabClick:function(t){var i=t.target.ancestor(".tab",!0).getAttribute("data-tab-id"),e=i&&this.tabNodes[i]&&i!==this.selectedTabId;this.switchTabs(i),e&&this.loadTab(i)},switchTabs:function(t){var i=this.tabContainer.one('[data-tab-id="'+this.selectedTabId+'"] .count-in-parens');i&&i.set("text",""),t&&this.tabNodes[t]&&(this.selectedTabId=t,Object.values(this.tabNodes).forEach((function(t){t.removeClass("selected")})),this.tabNodes[t].addClass("selected"),this.listViews.main.get("container").addClass("hidden"),this.listViews.admin.get("container").addClass("hidden"),this.listViews[this.selectedTabId].get("container").removeClass("hidden"))},loadTab:function(i){var n,o=this,a=this.selectedTabId;return"main"===i?this.seenNotifs.main=!0:"admin"===i&&(this.seenNotifs.admin=!0),n=this.listViews[a].reload(),o.currentLoadPromise=n,n.then((function(i){return o.currentLoadPromise!==n?t.Promise.resolve():o.listViews[a].appendItems(i)})).then((function(){o.loadTooltipHelper()})).catch((function(t){e.error("error reloading notification listing",t)}))},reloadList:function(){var i=this;return this.loadTopButton.addClass("hidden"),this.loadTab(this.selectedTabId).then((function(){var e=i.notificationsModel.getValue("unseenNotificationCounts");return"main"===i.selectedTabId?i.notificationsModel.setValue("unseenNotificationCounts",Object.assign(e,{default:0,total:e.total-e.default})):"admin"===i.selectedTabId&&i.notificationsModel.setValue("unseenNotificationCounts",Object.assign(e,{groupsYouAdmin:0,total:e.total-e.groupsYouAdmin})),t.Promise.resolve()}))},handleScroll:function(i){var e,n=this,o=this.scrollContainer.get("scrollTop"),a=this.scrollContainer.get("scrollHeight"),s=this.selectedTabId;!this.listViews[s].isLoadingMore&&this.listViews[s].itemViews.length>0&&0!==o&&o+this.scrollContainerHeight+100>a&&!this.listViews[s].isAtEnd&&(e=this.listViews[s].loadContinuated(),n.currentLoadPromise=e,e.then((function(i){return n.currentLoadPromise!==e?t.Promise.resolve():n.listViews[s].appendItems(i)})))},handleTourTooltipClick:function(){this.tourTooltipHelper.startTooltips()},loadTooltipHelper:function(){var i=this.get("container"),e=Object.assign({},this.tourTooltips);i.one('.tabs .tab[data-tab-id="admin"]')||(e.tooltipB.nextTooltipId=void 0,delete e.tooltipC),i.one(".notifications-empty-state").hasClass("hidden")||(e.tooltipA.nextTooltipId=e.tooltipC?"tooltipC":void 0,delete e.tooltipB),this.tourTooltipHelper=new t.TourTooltipHelper(this.appContext,{tourTooltips:e,viewParams:this.params,container:i,showPulse:!0})},handleAnalyticsClicks:function(t){var i=t.target;i.ancestor('.tab[data-tab-id="main"]',!0)?this.beaconAnalytics("Tab Click: main"):i.ancestor('.tab[data-tab-id="admin"]',!0)?this.beaconAnalytics("Tab Click: admin"):i.ancestor(".foot-link",!0)?this.beaconAnalytics("View All Click"):i.ancestor(".settings-link",!0)&&this.beaconAnalytics("Settings Click")},beaconAnalytics:function(i){t.Analytics.sendClick("","Notifications Feature Action")},destroy:function(){if(this.seenNotifs.admin||this.seenNotifs.main){var t={notification_groups:"hermes_2020"};this.seenNotifs.main&&(this.listViews.main.itemViews.forEach((function(t){t.seenStatusUpdate()})),t.notification_groups+=",default"),this.seenNotifs.admin&&(this.listViews.admin.itemViews.forEach((function(t){t.seenStatusUpdate()})),t.notification_groups+=",groups_you_admin");var i=this.appContext.getViewer();return this.notificationsModel.remoteReadUnseenNotificationCount(Object.assign(t,{id:i.nsid}),this.appContext).then((function(t){e.info("succesfully updated unseenNotificationCount")})).catch((function(t){e.error("error reading unseen notifications")}))}},getSubviews:function(){var i=this,e=[];return e.push(this.appContext.getView("notifications-list-view",{containerType:"panel"}).then((function(t){return i.listViews.main=t,t.setAdditionalApiParams(i.notificationsHelper.getFilterConfig("all").additionalApiParams),t.initialize()}))),e.push(this.appContext.getView("notifications-list-view",{containerType:"panel"}).then((function(t){return i.listViews.admin=t,t.setAdditionalApiParams(i.notificationsHelper.getFilterConfig("groupsYouAdmin-all").additionalApiParams),t.initialize()}))),t.Promise.all(e)},insertSubviews:function(){var i=[];return this.listViews.main&&(this.scrollContainer.append(this.listViews.main.get("container")),i.push(this.listViews.main.activate())),this.listViews.admin&&(this.scrollContainer.append(this.listViews.admin.get("container")),this.listViews.admin.get("container").addClass("hidden"),i.push(this.listViews.admin.activate())),t.Promise.all(i)},handleUnseenPolled:function(t){var i=t.unseenCounts;("main"===this.selectedTabId&&i&&i.default&&i.default>0||"admin"===this.selectedTabId&&i&&i.groupsYouAdmin&&i.groupsYouAdmin>0)&&this.loadTopButton.removeClass("hidden"),"main"===this.selectedTabId&&i&&i.groupsYouAdmin&&i.groupsYouAdmin>0?this.updateUnseenCount("admin",i.groupsYouAdmin):"admin"===this.selectedTabId&&i&&i.default&&i.default>0&&this.updateUnseenCount("main",i.default)},updateUnseenCount:function(t,i){var e,n=this.tabContainer.one('[data-tab-id="'+t+'"] .count-in-parens');n&&(0===i?n.addClass("hidden"):(e="("+(i>=100?"99+":i)+")",n.set("text",e),n.removeClass("hidden")))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-notifications-panel","notifications-helper","tour-tooltip-helper","hermes-template-tour-tooltip","hermes-template-new-feature-pulse"],langBundles:["common","notifications","relative-dates","feed"]});YUI.add("notifications-menu-view",(function(e){"use strict";e.namespace("Views")[this.name]=e.Base.create("notifications-menu-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.pollingFailed=!1,this.shouldFetchNotifs=!0,this.viewer=this.appContext.getViewer(),this.notifFilter="",""===this.get("container").get("innerHTML")&&this.setContainerWithTemplate("notifications-menu"),this},loadState:function(){var t=this;return this.viewer.signedIn?this.appContext.getModel("person-notifications-models",this.viewer.nsid).then((function(n){if(t.set("personNotificationsModel",n),Date.now()-n.getValue("unseenLastFetchedTimestamp")>e.config.flickr.notifications.loading_count_refetch_delay)return n.remoteReadUnseenNotificationCount({id:t.viewer.nsid,filter:t.notifFilter},t.appContext).then(null,(function(e){t.pollingFailed=!0}))})):e.Promise.resolve()},buildContainer:function(){var e=this,t=0;return e.get("personNotificationsModel")&&(t=e.formatCount99(e.get("personNotificationsModel").getValue("unseenNotificationCount"))),this.setContainerWithTemplate("notifications-menu",{unseenNotificationCount:t}),this},activate:function(){var t,n=this,i=n.get("personNotificationsModel");n.unseenBadge=n.get("container").one(".c-notification-unseencount"),n.unseenCount=0,n.notifIcon=n.get("container").one(".c-notification-icon"),this.registerEventHandler(i.on("valuesChanged",(function(e){e.unseenNotificationCounts&&(e.unseenNotificationCounts.newVal.total>0?n.unseenBadge.set("text",n.formatCount99(e.unseenNotificationCounts.newVal.total)):n.unseenBadge.addClass("hidden"))}))),(t=i.getValue("unseenNotificationCounts")||{}).total>0?(n.unseenBadge.set("text",n.formatCount99(t.total)),n.unseenBadge.removeClass("hidden")):n.unseenBadge.addClass("hidden"),e.on("notifications:closeNotificationsMenuClicked",(function(e){n.droparound.close()})),this.registerEventHandler(this.get("container").on("click",n.openMenu.bind(n))),this.registerEventHandler(this.get("container").on("key",n.keyboardToggleMenu.bind(n),"down:13,32")),this.registerEventHandler(this.get("container").on("key",n.enterMenu.bind(n),"down:9,40")),this.viewer.signedIn&&n.pollForUnseenNotifs()},pollForUnseenNotifs:function(){this.pollIntervalId=setInterval(this.readUnseenNotifs.bind(this),e.config.flickr.notifications.polling_delay)},readUnseenNotifs:function(){var t=this,n=t.get("personNotificationsModel");n.remoteReadUnseenNotificationCount({id:t.viewer.nsid,filter:t.notifFilter},t.appContext).then((function(i){var o;t.shouldFetchNotifs=!0,n.setValue("initialNotificationsData",{}),(o=n.getValue("unseenNotificationCounts")||{}).total>0?(t.unseenBadge.set("text",t.formatCount99(o.total)),t.unseenBadge.removeClass("hidden")):t.unseenBadge.addClass("hidden"),e.fire("notificationsMenu:unseenCountPolled",{unseenCounts:o})}),(function(n){clearInterval(t.pollIntervalId),t.pollingFailed||(t.pollingFailedTimeoutId=setTimeout(t.pollForUnseenNotifs.bind(t),e.config.flickr.notifications.polling_failure_timeout)),t.pollingFailed=!0}))},openMenu:function(){this.revealNotifications()},keyboardToggleMenu:function(e){e.preventDefault(),!this.droparound||this.droparound.isClosed?this.revealNotifications():this.droparound.close()},enterMenu:function(e){var t=e.keyCode;if(9===t&&!e.shiftKey&&"true"===e.target.getAttribute("aria-expanded")||40===t){e.preventDefault();var n=this.droparound.get("container").one("div.notifs-droparound");if(n){var i=n.one("a.mail-icon");this.registerEventHandler(i.on("key",this.enterNotificationsList.bind(this),"down:9,40")),i.focus()}}},enterNotificationsList:function(e){var t=e.keyCode;(9===t&&!e.shiftKey||40===t)&&(e.preventDefault(),this.droparound.get("subview").findFocus.call(this,this.droparound.get("container").one("div.notifs-droparound").one("ul").one("li:not(.hidden)")))},revealNotifications:function(){this.appContext.viewportData.getWidth();var t,n=this.appContext.viewportData.getHeight(),i=this.get("container").one(".c-notification-icon"),o=Math.min(n-100,800);e.Analytics.sendClick("Notifications Bell: 2020"),t=new e.Views["notifications-panel-view"]({appContext:this.appContext,height:o}),this.droparound=new e.Views.FluidDroparound({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,anchorOffsetVertical:-4,showDropArrow:!0,contentPadding:0,anchorElement:i,subview:t,observePageResize:!0,positionFixed:!0,autoSizeToContent:!0,preventPageScrollOnScroll:!0,width:450,arrowOffset:60}),this.droparound.show();var s=this.get("personNotificationsModel"),a=s.getValue("unseenNotificationCounts");s.setValue("unseenNotificationCounts",Object.assign(a,{default:0,total:a.total-a.default})),this.shouldFetchNotifs=!1},formatCount99:function(e){return e>=100?"99+":e},destructor:function(){clearInterval(this.pollIntervalId),clearTimeout(this.pollingFailedTimeoutId)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-notifications-menu","fluid-droparound-view","notifications-panel-view"],langBundles:["notifications","common"]});YUI.add("hermes-template-person-card",(function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t"+n.escapeExpression(n.lambda(null!=(o=null!=l?r(l,"person"):l)?r(o,"realname"):o,l))+"\n\t\t\t\t\t"+(null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=l?r(l,"personLocation"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.noop,data:a,loc:{start:{line:15,column:5},end:{line:15,column:37}}}))?o:"")+"\n"},2:function(n,l,t,e,a){return" - "},4:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(t,"each").call(null!=l?l:n.nullContext||{},null!=l?r(l,"photostream"):l,{name:"each",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:3},end:{line:29,column:12}}}))?o:""},5:function(n,l,t,e,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(t,"if").call(null!=l?l:n.nullContext||{},null!=l?r(l,"needsInterstitial"):l,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.program(8,a,0),data:a,loc:{start:{line:24,column:4},end:{line:28,column:11}}}))?o:""},6:function(n,l,t,e,a){var o,r,s=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u="function",c=n.escapeExpression,p=n.lambda,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\t<a href="'+c(typeof(r=null!=(r=m(t,"url")||(null!=l?m(l,"url"):l))?r:i)===u?r.call(s,{name:"url",hash:{},data:a,loc:{start:{line:25,column:14},end:{line:25,column:21}}}):r)+'" title="'+c(typeof(r=null!=(r=m(t,"title")||(null!=l?m(l,"title"):l))?r:i)===u?r.call(s,{name:"title",hash:{},data:a,loc:{start:{line:25,column:30},end:{line:25,column:39}}}):r)+'" width="'+c(p(null!=(o=null!=(o=null!=l?m(l,"sizes"):l)?m(o,"sq"):o)?m(o,"width"):o,l))+'" height="'+c(p(null!=(o=null!=(o=null!=l?m(l,"sizes"):l)?m(o,"sq"):o)?m(o,"height"):o,l))+'" style="background: url(https://combo.staticflickr.com/pw/images/spaceball.gif);" data-track="personCardRecentPhotosClick"></a>\n'},8:function(n,l,t,e,a){var o,r,s=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u="function",c=n.escapeExpression,p=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\t<a href="'+c(typeof(r=null!=(r=p(t,"url")||(null!=l?p(l,"url"):l))?r:i)===u?r.call(s,{name:"url",hash:{},data:a,loc:{start:{line:27,column:14},end:{line:27,column:21}}}):r)+'" title="'+c(typeof(r=null!=(r=p(t,"title")||(null!=l?p(l,"title"):l))?r:i)===u?r.call(s,{name:"title",hash:{},data:a,loc:{start:{line:27,column:30},end:{line:27,column:39}}}):r)+'" style="background: url('+c(n.lambda(null!=(o=null!=(o=null!=l?p(l,"sizes"):l)?p(o,"sq"):o)?p(o,"displayUrl"):o,l))+');" data-track="personCardRecentPhotosClick"></a>\n'},10:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<span class="tertiary">'+n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"person.NO_PHOTOS"},data:a,loc:{start:{line:31,column:26},end:{line:31,column:69}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var o,r,s=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u=n.escapeExpression,c=n.lambda,p=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\n<div>\n\t<section>\n\t\t<div class="follow-subview">'+u((p(t,"outlet")||l&&p(l,"outlet")||i).call(s,null!=l?p(l,"follow-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:4,column:30},end:{line:4,column:52}}}))+'</div>\n\n\t\t<div class="attribution">\n\t\t\t<a href="'+u(c(null!=(o=null!=l?p(l,"personURLS"):l)?p(o,"photostream"):o,l))+'" data-track="personCardAttributionNameClick">\n\t\t\t\t<h3 class="fade-out">'+u(c(null!=(o=null!=l?p(l,"person"):l)?p(o,"username"):o,l))+'</h3>\n\t\t\t</a>\n\t\t</div>\n\t\t<div class="info">\n\t\t\t<span class="secondary realname fade-out">\n'+(null!=(o=p(t,"if").call(s,null!=(o=null!=l?p(l,"person"):l)?p(o,"realname"):o,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:13,column:4},end:{line:16,column:11}}}))?o:"")+"\t\t\t\t"+u("function"==typeof(r=null!=(r=p(t,"personLocation")||(null!=l?p(l,"personLocation"):l))?r:i)?r.call(s,{name:"personLocation",hash:{},data:a,loc:{start:{line:17,column:4},end:{line:17,column:22}}}):r)+'\n\t\t\t</span>\n\t\t</div>\n\n\t\t<div class="recent-photos">\n'+(null!=(o=p(t,"if").call(s,null!=l?p(l,"photostream"):l,{name:"if",hash:{},fn:n.program(4,a,0),inverse:n.program(10,a,0),data:a,loc:{start:{line:22,column:2},end:{line:32,column:9}}}))?o:"")+'\t\t</div>\n\t</section>\n</div>\n\n<div class="links secondary">\n\t<a href="'+u(c(null!=(o=null!=l?p(l,"personURLS"):l)?p(o,"sendFlickrMail"):o,l))+'" data-track="personCardMessageClick">'+u((p(t,"intlMessage")||l&&p(l,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"person.MESSAGE"},data:a,loc:{start:{line:38,column:77},end:{line:38,column:118}}}))+'</a>\n\t<a href="'+u(c(null!=(o=null!=l?p(l,"personURLS"):l)?p(o,"albums"):o,l))+'" data-track="personCardAlbumsClick">'+u((p(t,"intlMessage")||l&&p(l,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"person.ALBUMS"},data:a,loc:{start:{line:39,column:68},end:{line:39,column:108}}}))+'</a>\n\t<a href="'+u(c(null!=(o=null!=l?p(l,"personURLS"):l)?p(o,"favorites"):o,l))+'" data-track="personCardFavesClick">'+u((p(t,"intlMessage")||l&&p(l,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"person.FAVES"},data:a,loc:{start:{line:40,column:70},end:{line:40,column:109}}}))+'</a>\n\t<a class="align-right" href="'+u(c(null!=(o=null!=l?p(l,"personURLS"):l)?p(o,"profile"):o,l))+'" data-track="personCardProfileClick">'+u((p(t,"intlMessage")||l&&p(l,"intlMessage")||i).call(s,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:a,loc:{start:{line:41,column:90},end:{line:41,column:129}}}))+"</a>\n</div>\n"},useData:!0}),e={};n.Array.each([],(function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)})),n.Template.register("hermes/person-card",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("person-card-view",(function(e){e.namespace("Views")[this.name]=e.Base.create("person-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.pathAlias=e.pathAlias,this.set("isActiveViewAgnostic",e.isActiveViewAgnostic||!1),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"follow-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){var o,t=this,n={contentType:7};return this.nsid?(n.id=this.nsid,o=new e.FlickrPromise({person:this.appContext.getModel("person-models",n),photostream:this.appContext.getModel("photostream-models",n),personProfile:this.appContext.getModel("person-profile-models",n)}).then((function(e){t.personModel=e.person,t.personProfileModel=e.personProfile,t.photostreamModel=e.photostream}))):(n.pathAlias=this.pathAlias,o=this.fetchPersonModelFromPathAlias(n).then((function(o){return t.personModel=o,n.id=t.personModel.getValue("nsid"),new e.FlickrPromise({photostream:this.appContext.getModel("photostream-models",n),personProfile:this.appContext.getModel("person-profile-models",n)})})).then((function(e){t.personProfileModel=e.personProfile,t.photostreamModel=e.photostream}))),o.then((function(e){return t.personLocation=t.personProfileModel.getValue("location"),t.photostreamModel.getValue("photoPageList").getPage({page:1,perPage:5}).then((function(e){t.photostreamPhotos=e}))}),(function(e){t.loadingError=!0,(1===e.code&&"User not found"===e.message||5===e.code)&&(t.badUser=!0)}))},fetchPersonModelFromPathAlias:function(e){var o=this;return this.appContext.getModelRegistry("person-models").then((function(o){return o.remoteRead(e)})).then((function(e){return o.appContext.getModel("person-models",e.nsid)}))},buildContainer:function(){var o,t;return this.loadingError?(t=this.badUser?'<span class="no-user">'+this.intlMessage({intlName:"person.NO_LONGER_ON_FLICKR"})+"</span>":'<span class="error-user">'+this.intlMessage({intlName:"person.ERROR_LOADING"})+"</span>",this.setContainerHTML(t)):(o=this.personModel.toJSON(),this.setContainerWithTemplate("person-card",{person:o,photostream:this.photostreamPhotos.map((function(e){return e.toJSON()})),personLocation:this.personLocation,personURLS:e.URLHelper.generatePersonUrls(this.personModel)})),this},activate:function(){var e,o,t=this.get("container"),n=t.one(".follow-view"),s=t.one(".attribution");return n&&(e=n.one(".relationship"),o=n.one(".relationship > .is-following")),s&&(e?o&&s.addClass("shorter"):s.addClass("full")),this}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-person-card","url-helper"],langBundles:["person","common"]});