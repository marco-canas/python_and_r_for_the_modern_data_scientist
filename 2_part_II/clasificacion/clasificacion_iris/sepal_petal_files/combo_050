YUI.add("hermes-template-sub-photo-contexts-title-galleries",(function(e,n){var l=e.Template.Handlebars.revive({1:function(e,n,l,t,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\t\t"+e.escapeExpression((a(l,"intlMessage")||n&&a(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_IN_ONE_GALLERY"},data:o,loc:{start:{line:3,column:2},end:{line:3,column:68}}}))+"\n"},3:function(e,n,l,t,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\t\t"+e.escapeExpression((a(l,"intlMessage")||n&&a(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{count:null!=n?a(n,"totalFriendly"):n,intlName:"photo-page-scrappy.PHOTO_IN_N_GALLERIES"},data:o,loc:{start:{line:6,column:2},end:{line:6,column:88}}}))+"\n"},5:function(e,n,l,t,o){var a=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\t\t"+e.escapeExpression((a(l,"intlMessage")||n&&a(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:o,loc:{start:{line:9,column:2},end:{line:9,column:45}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,n,l,t,o){var a,r=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<h5 class="total">\n'+(null!=(a=(i(l,"ifCond")||n&&i(n,"ifCond")||s).call(r,null!=n?i(n,"total"):n,"===",1,{name:"ifCond",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:2,column:1},end:{line:4,column:12}}}))?a:"")+(null!=(a=(i(l,"ifCond")||n&&i(n,"ifCond")||s).call(r,null!=n?i(n,"total"):n,">",1,{name:"ifCond",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:1},end:{line:7,column:12}}}))?a:"")+(null!=(a=(i(l,"ifCond")||n&&i(n,"ifCond")||s).call(r,null!=n?i(n,"total"):n,"===",0,{name:"ifCond",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:8,column:1},end:{line:10,column:12}}}))?a:"")+"</h5>"},useData:!0}),t={};e.Array.each([],(function(n){var l=e.Template.get("hermes/"+n);l&&(t[n]=l)})),e.Template.register("hermes/sub-photo-contexts-title-galleries",(function(n,o){return(o=o||{}).partials=o.partials?e.merge(t,o.partials):t,l(n,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-contexts-galleries",(function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,l,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t<div class="sub-photo-context sub-photo-context-galleries">\n'+(null!=(a=e.invokePartial(s(l,"sub-photo-contexts-title-galleries"),t,{name:"sub-photo-contexts-title-galleries",data:o,indent:"\t\t",helpers:n,partials:l,decorators:e.decorators}))?a:"")+"\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"canAdd"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:2},end:{line:24,column:9}}}))?a:"")+"\n"+(null!=(a=(s(n,"isFlipped")||t&&s(t,"isFlipped")||e.hooks.helperMissing).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:2},end:{line:32,column:16}}}))?a:"")+'\n\t\t<ul class="context-list">\n'+(null!=(a=s(n,"each").call(r,null!=t?s(t,"contexts"):t,{name:"each",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:35,column:3},end:{line:37,column:12}}}))?a:"")+"\t\t</ul>\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showMore"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:2},end:{line:41,column:9}}}))?a:"")+"\t</div>\n"},2:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\t\t\t<a href='#' class='add-to'>"+e.escapeExpression((a(n,"intlMessage")||t&&a(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:o,loc:{start:{line:23,column:30},end:{line:23,column:90}}}))+"</a>\n"},4:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=(r(n,"ifCond")||t&&r(t,"ifCond")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?r(t,"faveCount"):t,">",0,{name:"ifCond",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:3},end:{line:31,column:14}}}))?a:""},5:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<div class="faves-container">\n\t\t\t\t\t'+e.escapeExpression((a(n,"outlet")||t&&a(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?a(t,"sub-photo-fave-view"):t,{name:"outlet",hash:{},data:o,loc:{start:{line:29,column:5},end:{line:29,column:35}}}))+"\n\t\t\t\t</div>\n"},7:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=e.invokePartial(r(l,"sub-photo-contexts-item"),t,{name:"sub-photo-contexts-item",data:o,indent:"\t\t\t\t",helpers:n,partials:l,decorators:e.decorators}))?a:""},9:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="view-all-contexts-of-type"><a href="#">'+e.escapeExpression((a(n,"intlMessage")||t&&a(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.VIEW_MORE_GALLERIES"},data:o,loc:{start:{line:40,column:54},end:{line:40,column:119}}}))+"</a></div>\n"},11:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canAdd"):t,{name:"if",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:1},end:{line:11,column:8}}}))?a:""},12:function(e,t,n,l,o){var a=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,s=e.escapeExpression,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t<div class="sub-photo-context sub-photo-context-galleries empty">\n\t\t\t<p tabindex="0">'+s((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(a,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_NOT_IN_GALLERIES"},data:o,loc:{start:{line:8,column:19},end:{line:8,column:87}}}))+"</p>\n\t\t\t<p><a href='#' class='add-to'>"+s((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(a,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:o,loc:{start:{line:9,column:33},end:{line:9,column:93}}}))+"</a></p>\n\t\t</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasFavesOrGalleries"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:1,column:0},end:{line:43,column:7}}}))?a:"")+"\n"},usePartial:!0,useData:!0}),l={};e.Array.each(["sub-photo-contexts-title-galleries","sub-photo-contexts-item"],(function(t){var n=e.Template.get("hermes/"+t);n&&(l[t]=n)})),e.Template.register("hermes/sub-photo-contexts-galleries",(function(t,o){return(o=o||{}).partials=o.partials?e.merge(l,o.partials):l,n(t,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-sub-photo-contexts-title-galleries","hermes-template-sub-photo-contexts-item"]});YUI.add("gallery-selection-dialog-view",(function(e,t){var o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("gallery-selection-dialog-view",e.Views["album-selection-dialog-view"],[],{langBundles:this.details.langBundles,initialLoad:function(){var t,o=this;return this.set("scrappy",this.appContext.flipper.isFlipped("enable-scrappy-photo-page")),t={galleriesModel:this.appContext.getModel("person-galleries-models",this.appContext.auth.user.nsid)},this.get("scrappy")?t.galleriesThePhotoIsIn=o.appContext.getModel("photo-galleries-models",o.get("photoID")).then((function(e){return e.getListPageByContinuation(400).then((function(){return e.getValue("galleries").getList()}))})):t.galleriesThePhotoIsIn=o.appContext.getModel("photo-contexts-models",o.get("photoID")).then((function(e){return e.registry.getContextsOfType(o.get("photoID"),"gallery-models")})),new e.FlickrPromise(t).then((function(e){e.galleriesModel;return o.set("galleriesList",e.galleriesModel.getValue("galleriesList")),o.set("albumListForPhoto",e.galleriesThePhotoIsIn),o.recursivelyLoadRemainingGalleries(1)})).then((function(){o.set("albumList",o.get("galleriesList").toJSON())}),(function(e){throw o.onError({message:o.intlMessage({intlName:"photo-page-scrappy.ERROR_LOADING_GALLERIES"}),err:e}),e}))},addPhoto:function(e){var t=this;return this.appContext.getModelRegistry("gallery-models").then((function(o){return o.remote.addPhoto({photoID:t.get("photoID"),galleryCompoundID:e},t.appContext).then(null,(function(e){throw t.onError({message:t.intlMessage({intlName:"photo-page-scrappy.ERROR_ADDING_TO_GALLERY"}),err:e}),e}))}))},removePhoto:function(e){var t=this;return this.appContext.getModelRegistry("gallery-models").then((function(o){return o.remote.removePhoto({photoID:t.get("photoID"),galleryCompoundID:e},t.appContext).then((function(e){return e}),(function(e){throw t.onError({message:t.intlMessage({intlName:"photo-page-scrappy.ERROR_REMOVING_FROM_GALLERY"}),err:e}),e}))}))},createNewAndAddPhoto:function(e,t){var o=this;return this.appContext.getModelRegistry("gallery-models").then((function(r){return r.remote.create({photoID:o.get("photoID"),title:e,description:t},o.appContext).then((function(e){return e.getValue("primary")||o.onError({message:o.intlMessage({intlName:"photo-page-scrappy.ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY"}),err:{message:"Photo cannot be added to galleries.",stack:"gallery-selection-dialog"}}),e}),(function(e){throw o.onError({message:o.intlMessage({intlName:"photo-page-scrappy.ERROR_CREATING_GALLERY"}),err:e}),e}))}))},onError:function(e){var t=document.querySelector(".album-selection-errors"),r=document.querySelector(".album-selection-buttons");document.querySelector(".error-message").innerText=e.message,r.classList.add("hide"),t.classList.remove("hide"),o.error({err:e.err})},recursivelyLoadRemainingGalleries:function(t){var o=this;return o.get("galleriesList").getList().length<o.get("galleriesList").totalItems?this.get("galleriesList").getPage({page:t,perPage:500}).then((function(){return o.recursivelyLoadRemainingGalleries(t+1)})):e.Promise.resolve()}})}),"@VERSION@",{requires:["flickr-view","album-selection-dialog-view"],optional:["set-models"],langBundles:["common","groups","photo-page-scrappy"]});YUI.add("sub-photo-galleries-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.photoId=e.photoId,this.list=[],this.loading=!1,this.removing={},this.startAmount=6,this.perPage=50,this.displayAmount=this.startAmount,this.addKeyShortcut="down:65",this.linkedToGalleries=e.linkedToGalleries,void 0!==this.getViewDataFromHistory("displayAmount")&&(this.startAmount=this.getViewDataFromHistory("displayAmount"),this.displayAmount=this.getViewDataFromHistory("displayAmount")),""===this.get("container").get("innerHTML")&&this.setContainerHTML("")},subviewConfig:{"sub-photo-fave-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-likes")},additionalViewClasses:function(){return this.appContext.flipper.isFlipped("enable-likes")?["likes-enabled"]:void 0}}},loadState:function(){var t,i=this;return t={photoGalleriesModel:this.appContext.getModel("photo-galleries-models",this.photoId),photoModel:this.appContext.getModel("photo-models",this.photoId),photoPrivacyModel:this.appContext.getModel("photo-privacy-models",this.photoId),photoEngagementModel:this.appContext.getModel("photo-engagement-models",this.photoId)},this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===this._params.nsid&&(t.personGalleriesModel=this.appContext.getModel("person-galleries-models",this.appContext.getViewer().nsid)),new e.FlickrPromise(t).then((function(t){return e.Object.each(t,(function(e,t){i.set(t,e)})),i.loadListData()}))},loadListData:function(){var t=this;return this.loading=!0,this.getGalleries(this.displayAmount).then((function(i){var o,s,n,a,l=t.list,r=[];return t.loading=!1,(r=i||[]).length>t.displayAmount&&(r=r.slice(0,t.displayAmount)),(s=l)===(n=r)||s.length===n.length&&(a=!0,e.Array.some(s,(function(e,t){if(e!==n[t])return a=!1,!0})),a)?o=!1:(t.list=r,o=!0),{listChanged:o}}))},getGalleries:function(t){var i=this.get("photoGalleriesModel"),o=i.getValue("galleries").getList(),s=i.getValue("total");return t>s&&(t=s),o.length<t?i.getListPageByContinuation(t-o.length).then((function(){return i.getValue("galleries").getList().slice(0,t)})):e.Promise.resolve(o.slice(0,t))},canViewerRemove:function(e){return this.appContext.getViewer().nsid===this._params.nsid||this.appContext.getViewer().nsid===e.getValue("owner").getValue("id")},canViewerAdd:function(){var e=0===this.get("photoModel").getValue("safetyLevel"),t=this.get("photoPrivacyModel").getValue("isPublic");return e&&t&&this.appContext.getViewer().nsid!==this._params.nsid&&this.appContext.getViewer().signedIn},listToJSON:function(){var e=this;return this.list.map((function(t){var i=t.toJSON();return i.isGallery=!0,i.canRemove=e.canViewerRemove(t),i}))},buildContainer:function(){var t=this.get("photoGalleriesModel").getValue("total"),i=t>this.displayAmount,o=this.get("photoEngagementModel").getValue("faveCount"),s=this.appContext.flipper.isFlipped("enable-likes")&&o>0||t>0;this.setContainerWithTemplate("sub-photo-contexts-galleries",{empty:0===this.list.length,canAdd:this.canViewerAdd(),contexts:this.listToJSON(),showMore:i,total:t,faveCount:o,hasFavesOrGalleries:s,totalFriendly:e.Number.format(t,{thousandsSeparator:","}),likesEnabled:this.appContext.flipper.isFlipped("enable-likes")})},activate:function(){var t=this,i=this.get("container");return this.canViewerAdd()&&(this.get("photoGalleriesModel")&&this.registerEventHandler(this.get("photoGalleriesModel").on("valuesChanged",this.handleListChanges.bind(this))),this.attachKeyEvent(this.addKeyShortcut,(function(e){e.preventDefault(),t.showAddDialog()}))),this.registerEventHandler(i.on("click",this.handleContainerClick.bind(this))),this.linkedToGalleries&&(e.AnchorRepositioner.jumpTo(i),i.one(".sub-photo-context-galleries").addClass("animated-permalink")),this},handleListChanges:function(e){this.loading||this.reload()},handleContainerClick:function(e){var t;e.target.ancestor(".remove",!0)?(e.preventDefault(),t=e.target.ancestor("li"),this.removeFromContext(t.getAttribute("data-context-id"),t)):e.target.ancestor(".add-to",!0)?(e.preventDefault(),this.showAddDialog()):e.target.ancestor(".view-all-contexts-of-type a",!0)&&(e.preventDefault(),this.showMore())},showMore:function(){this.displayAmount===this.startAmount&&this.startAmount<this.perPage?this.displayAmount=this.perPage:this.displayAmount+=this.perPage,this.setViewDataOnHistory("displayAmount",this.displayAmount),this.reload()},reload:function(){var e=this;this.loadListData().then((function(t){t.listChanged&&e.buildContainer()}))},removeFromContext:function(e,t){var i=this,o=this.get("photoGalleriesModel").getValue("galleries").getFromListByID(e).getValue("compoundId"),s={photoID:this.photoId,galleryCompoundID:o};this.removing[e]||(this.removing[e]=!0,t.setStyle("opacity","0"),"gallery-models","removePhoto",this.get("photoGalleriesModel"),this.appContext.getModelRegistry("gallery-models").then((function(o){o.remote.removePhoto(s,i.appContext).then((function(t){delete i.removing[e],i.reload()}),(function(o){throw delete i.removing[e],t.setStyle("opacity","1"),o})).then(null,(function(e){throw i.onError({message:i.intlMessage({intlName:"photo-page-scrappy.ERROR_REMOVING_FROM_GALLERY"}),err:e}),e}))})))},showAddDialog:function(){this.showAddToStuff()},showAddToStuff:function(){new e.CurationHelper(this.appContext).showAddToCuration({photoId:this.photoId,showAlbums:!1,showGalleries:!0,initialTab:"gallery",useViewportType:!1,containerType:"modal"})},onError:function(t){var i=this;this.fire("subviewViewEvent","getDialogOffset",(function(o){e.Views.dialog.getNewInstance("dialog-alert",{content:t.message,attrs:{title:i.intlMessage({intlName:"common.ERROR"}),level:"warning",confirmLabel:i.intlMessage({intlName:"common.OK"})},parent:i,offsetLeft:o,dialogClass:"scrappy-dialog"}).show()}))}})}),"@VERSION@",{requires:["array-extras","flickr-view","fluid-modal-view","fluid-droparound-view","flickr-promise","hermes-template-sub-photo-contexts-item","hermes-template-sub-photo-contexts-title-galleries","hermes-template-sub-photo-contexts-galleries","url-helper","gallery-selection-dialog-view","add-to-stuff-view","curation-helper"],optional:["photo-galleries-models","photo-models","person-galleries-models"],langBundles:["more-menu-view","photo-page-scrappy","common"]});YUI.add("sub-photo-contexts-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"sub-photo-groups-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1},"sub-photo-albums-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1},"sub-photo-galleries-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("sub-photo-contexts"),this},buildErrorContainer:function(){},activate:function(){return this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-contexts"],optional:["sub-photo-groups-view","sub-photo-albums-view","sub-photo-galleries-view"]});YUI.add("hermes-template-sub-photo-date-view",(function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,l,a){return"editable"},3:function(e,n,t,l,a){var o,r=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\t\t<span class="date-taken-label" title="'+(null!=(o=(s(t,"friendlyDateScrappySubphoto")||n&&s(n,"friendlyDateScrappySubphoto")||i).call(r,null!=n?s(n,"datePosted"):n,!1,!1,{name:"friendlyDateScrappySubphoto",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:4,column:40},end:{line:4,column:178}}}))?o:"")+'">\n'+(null!=(o=(s(t,"friendlyDateScrappySubphoto")||n&&s(n,"friendlyDateScrappySubphoto")||i).call(r,null!=n?s(n,"datePosted"):n,!1,!1,{name:"friendlyDateScrappySubphoto",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a,loc:{start:{line:5,column:3},end:{line:7,column:35}}}))?o:"")+"\t\t</span>\n"},4:function(e,n,t,l,a){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return e.escapeExpression((o(t,"intlMessage")||n&&o(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{intlDate:null!=n?o(n,"intlDate"):n,intlName:null!=n?o(n,"intlName"):n},data:a,loc:{start:{line:4,column:95},end:{line:4,column:146}}}))},6:function(e,n,t,l,a){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"\t\t\t\t"+e.escapeExpression((o(t,"intlMessage")||n&&o(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{intlDate:null!=n?o(n,"intlDate"):n,intlName:null!=n?o(n,"intlName"):n},data:a,loc:{start:{line:6,column:4},end:{line:6,column:55}}}))+"\n"},8:function(e,n,t,l,a){var o,r=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\t\t<span class="date-taken-label" title="'+(null!=(o=(s(t,"friendlyDateScrappySubphoto")||n&&s(n,"friendlyDateScrappySubphoto")||i).call(r,null!=n?s(n,"datePosted"):n,!1,!1,{name:"friendlyDateScrappySubphoto",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a,loc:{start:{line:10,column:40},end:{line:10,column:178}}}))?o:"")+'">\n'+(null!=(o=(s(t,"friendlyDateScrappySubphoto")||n&&s(n,"friendlyDateScrappySubphoto")||i).call(r,null!=n?s(n,"dateTaken"):n,null!=n?s(n,"takenGranularity"):n,!0,{name:"friendlyDateScrappySubphoto",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a,loc:{start:{line:11,column:3},end:{line:13,column:35}}}))?o:"")+"\t\t</span>\n"},10:function(e,n,t,l,a){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\t\t<a href="#" class="edit-date-taken ui-icon-edit-date-taken" data-action="edit" title="'+e.escapeExpression((o(t,"intlMessage")||n&&o(n,"intlMessage")||e.hooks.helperMissing).call(null!=n?n:e.nullContext||{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:a,loc:{start:{line:18,column:88},end:{line:18,column:126}}}))+'"></a>\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var o,r=null!=n?n:e.nullContext||{},i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\x3c!-- Date take on --\x3e\n<div class="date-taken clear-float '+(null!=(o=i(t,"if").call(r,null!=n?i(n,"isOwner"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:2,column:35},end:{line:2,column:65}}}))?o:"")+'">\n'+(null!=(o=i(t,"if").call(r,null!=n?i(n,"isDateTakenUnknown"):n,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(8,a,0),data:a,loc:{start:{line:3,column:1},end:{line:15,column:8}}}))?o:"")+"\n"+(null!=(o=i(t,"if").call(r,null!=n?i(n,"isOwner"):n,{name:"if",hash:{},fn:e.program(10,a,0),inverse:e.noop,data:a,loc:{start:{line:17,column:1},end:{line:19,column:8}}}))?o:"")+"</div>\n"},useData:!0}),l={};e.Array.each([],(function(n){var t=e.Template.get("hermes/"+n);t&&(l[n]=t)})),e.Template.register("hermes/sub-photo-date-view",(function(n,a){return(a=a||{}).partials=a.partials?e.merge(l,a.partials):l,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-date-modify",(function(n,a){var l=n.Template.Handlebars.revive({1:function(n,a,l,e,t){return'disabled="true"'},3:function(n,a,l,e,t){var s,o=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return n.escapeExpression(n.lambda(null!=(s=null!=a?o(a,"takenObj"):a)?o(s,"day"):s,a))},5:function(n,a,l,e,t){return"-"},7:function(n,a,l,e,t){var s,o=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return n.escapeExpression(n.lambda(null!=(s=null!=a?o(a,"takenObj"):a)?o(s,"hour"):s,a))},9:function(n,a,l,e,t){var s,o=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return n.escapeExpression(n.lambda(null!=(s=null!=a?o(a,"takenObj"):a)?o(s,"minute"):s,a))},11:function(n,a,l,e,t){var s,o=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return n.escapeExpression(n.lambda(null!=(s=null!=a?o(a,"takenObj"):a)?o(s,"second"):s,a))},compiler:[8,">= 4.3.0"],main:function(n,a,l,e,t){var s,o=null!=a?a:n.nullContext||{},r=n.hooks.helperMissing,u=n.escapeExpression,i=n.lambda,d=n.lookupProperty||function(n,a){if(Object.prototype.hasOwnProperty.call(n,a))return n[a]};return'<h2 class="date-modify-header">'+u((d(l,"intlMessage")||a&&d(a,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.EDIT_DATES"},data:t,loc:{start:{line:1,column:31},end:{line:1,column:87}}}))+'</h2>\n\n<h3 class="date-modify-header date-modify-taken-header">'+u((d(l,"intlMessage")||a&&d(a,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.DATE_TAKEN_ON"},data:t,loc:{start:{line:3,column:56},end:{line:3,column:115}}}))+'</h3>\n\n<div class="date-taken-inputs date-inputs">\n\t<div class="month" data-monthName="'+u(i(null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"monthNameEnglish"):s,a))+'">\n\t\t<span class="date-value">'+u(i(null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"monthName"):s,a))+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<div class="day" '+(null!=(s=d(l,"unless").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"day"):s,{name:"unless",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:18},end:{line:10,column:68}}}))?s:"")+' data-day="'+(null!=(s=d(l,"if").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"day"):s,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.program(5,t,0),data:t,loc:{start:{line:10,column:79},end:{line:10,column:131}}}))?s:"")+'">\n\t\t<span class="date-value">'+(null!=(s=d(l,"if").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"day"):s,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.program(5,t,0),data:t,loc:{start:{line:11,column:27},end:{line:11,column:79}}}))?s:"")+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<div class="year" data-year="'+u(i(null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"year"):s,a))+'">\n\t\t<span class="date-value">'+u(i(null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"year"):s,a))+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<input type="text" placeholder="hh" class="date-hour" maxlength="2" value="'+(null!=(s=d(l,"if").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"hour"):s,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.program(5,t,0),data:t,loc:{start:{line:18,column:76},end:{line:18,column:130}}}))?s:"")+'" />:\n\t<input type="text" placeholder="mm" class="date-minute" maxlength="2" value="'+(null!=(s=d(l,"if").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"minute"):s,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.program(5,t,0),data:t,loc:{start:{line:19,column:78},end:{line:19,column:136}}}))?s:"")+'" />:\n\t<input type="text" placeholder="ss" class="date-second" maxlength="2" value="'+(null!=(s=d(l,"if").call(o,null!=(s=null!=a?d(a,"takenObj"):a)?d(s,"second"):s,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.program(5,t,0),data:t,loc:{start:{line:20,column:78},end:{line:20,column:136}}}))?s:"")+'" />\n</div>\n\n<h3 class="date-modify-header date-modify-posted-header">'+u((d(l,"intlMessage")||a&&d(a,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.DATE_UPLOADED_ON"},data:t,loc:{start:{line:23,column:57},end:{line:23,column:119}}}))+'</h3>\n\n<div class="date-posted-inputs date-inputs">\n\t<div class="month" data-monthName="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"monthNameEnglish"):s,a))+'">\n\t\t<span class="date-value">'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"monthName"):s,a))+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<div class="day" '+(null!=(s=d(l,"unless").call(o,null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"day"):s,{name:"unless",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:30,column:18},end:{line:30,column:69}}}))?s:"")+' data-day="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"day"):s,a))+'">\n\t\t<span class="date-value">'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"day"):s,a))+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<div class="year" data-year="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"year"):s,a))+'">\n\t\t<span class="date-value">'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"year"):s,a))+'</span>\n\t\t<span class="ui-dropdown-arrows">&nbsp;</span>\n\t</div>\n\t<input type="text" placeholder="hh" class="date-hour" maxlength="2" value="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"hour"):s,a))+'" />:\n\t<input type="text" placeholder="mm" class="date-minute" maxlength="2" value="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"minute"):s,a))+'" />:\n\t<input type="text" placeholder="ss" class="date-second" maxlength="2" value="'+u(i(null!=(s=null!=a?d(a,"postedObj"):a)?d(s,"second"):s,a))+'" />\n</div>\n\n<div class="date-modify-buttons">\n\t<button class="ui-dialog-button ui-dialog-button-neutral ui-dialog-button-done"><span>'+u((d(l,"intlMessage")||a&&d(a,"intlMessage")||r).call(o,{name:"intlMessage",hash:{intlName:"common.SAVE"},data:t,loc:{start:{line:44,column:87},end:{line:44,column:125}}}))+"</span></button>\n</div>"},useData:!0}),e={};n.Array.each([],(function(a){var l=n.Template.get("hermes/"+a);l&&(e[a]=l)})),n.Template.register("hermes/date-modify",(function(a,t){return(t=t||{}).partials=t.partials?n.merge(e,t.partials):e,l(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});